@{
    ViewBag.Title = "SaleBackPreAddOrEditNew";
    Layout = "~/Views/Shared/_LayoutNew.cshtml";
}

<fieldset style="margin: 0px 0px 2px 0px; border: 1px solid #95B8E7">
    <legend style="color: #416AB7; font-weight: bold">操作按钮</legend>
    @if (Authorize(520317, 52031701))
    {
        <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-add" id="addBtn" onclick="add()">添加</a>
    }
    @if (Authorize(520317, 52031702))
    {
        <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit" id="btnEdit" onclick="edit()">编辑</a>
    }
    @if (Authorize(520317, 52031704))
    {
        <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-ok" id="btnSure" onclick="sure()">确认</a>
    }
    @if (Authorize(520317, 52031706))
    {
        <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-upf" id="noSureBtn" onclick="noSure()">反确认</a>
    }
    @if (Authorize(520317, 52031705))
    {
        <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cut" id="btnPost" onclick="posting()">过账</a>
    }
    @if (Authorize(520317, 52031707))
    {
        <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-daochu" id="exportBtn" onclick="exportData()">导出</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-print" id="printBtn" onclick="print()">打印</a>
    }
    @if (Authorize(520317, 52031701) || Authorize(520317, 52031702))
    {
        <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-save" id="btnSave" onclick="saveData()">保存</a>
    }
    <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-no" id="btnClose" onclick="frxs.tabClose()">关闭</a>
    <div style="float: right">
        <input type="button" id="historyBt" class="history_Button" value="查看历史" onclick="showHistory()" />
    </div>
</fieldset>
<form id="BackForm">
    <fieldset style="margin: 0px 0px 5px 0px; border: 1px solid #95B8E7">
        <legend style="color: #416AB7; font-weight: bold">基本信息</legend>
        <table id="tab" class="xstable" border="0">
            <tr>
                <td>退货单号：</td>
                <th>
                    <input type="text" name="BackID" id="BackID" readonly="readonly" class="readonly"></th>
                <td>退货时间：</td>
                <th>
                    <input onclick="WdatePicker({ dateFmt: 'yyyy-MM-dd HH:mm' })" class="Wdate easyui-validatebox" name="BackDate" id="BackDate" required="true" /></th>
                <td>仓库：</td>
                <th>
                    <select id="SubWID" name="SubWID" class="easyui-combobox" style="width: 175px" panelheight="auto" editable="false"></select></th>
                <td>状态：</td>
                <th>
                    <select id="Status" name="Status" class="easyui-combobox" editable="false" style="width: 140px" panelheight="auto" readonly="readonly" class="readonly">
                        <option value='0'>录单</option>
                        <option value='1'>确认</option>
                        <option value='2'>过账</option>
                        <option value='3'>结算</option>
                    </select>
                </th>
            </tr>
            <tr>
                <td>退货门店：</td>
                <th colspan="3" style="text-align: left;">
                    <input type="hidden" name="ShopID" id="ShopID" />
                    <input type="hidden" name="hidShopCode" id="hidShopCode" />
                    <input type="text" name="ShopCode" id="ShopCode" class="easyui-validatebox" style="width: 100px;" required="true"><input type="button" id="btnSelShop" value="..." onclick="selShop()" />
                    <input type="text" name="ShopName" id="ShopName" class="easyui-validatebox" style="width: 220px" required="true" readonly="readonly" />
                </th>
                <td>退货总金额：</td>
                <th>
                    <input type="text" name="PayAmount" id="PayAmount" readonly="readonly" class="readonly" style="width: 175px" />
                </th>
            </tr>
            <tr>
                <td>备注：</td>
                <th colspan="3" style="text-align: left;">
                    <input type="text" name="Remark" style="width: 98%" id="Remark"></th>
                <td>录单人员：</td>
                <th>
                    <input type="text" name="CreateUserName" id="CreateUserName" readonly="readonly" class="readonly" style="width: 175px" />
                </th>
                <td>录单时间：
                </td>
                <th>
                    <input name="CreateTime" id="CreateTime" readonly="readonly" class="readonly" />
                </th>
            </tr>
            <tr>
                <td>确认人员：</td>
                <th>
                    <input type="text" name="ConfUserName" id="ConfUserName" readonly="readonly" class="readonly"></th>
                <td>确认时间：</td>
                <th>
                    <input name="ConfTime" id="ConfTime" readonly="readonly" class="readonly" /></th>
                <td>过帐人员：</td>
                <th>
                    <input type="text" name="PostingUserName" id="PostingUserName" readonly="readonly" class="readonly" style="width: 175px" />
                </th>
                <td>过帐时间：
                </td>
                <th>
                    <input name="PostingTime" id="PostingTime" readonly="readonly" class="readonly" />
                </th>
            </tr>
        </table>
    </fieldset>
</form>
<div id="grid"></div>
<div class="history" id="history" style="width: 460px; border: 1px solid #95B8E7; right: 1%; top: 50px; position: fixed; float: right; z-index: 99; display: none; background: #fff;"></div>
@section scripts
{
    <script src="@Url.Content("~/Scripts/bussiness/saleback/saleBackPreAddOrEditNew.js")" type="text/javascript"></script>
}
