<?xml version="1.0"?>
<configuration>
  <Pages>
    <Page name="DemoTableList" title="DemoTable列表" pageAuth="30">
      <OperateControls>
        <OperateControl text="新增" htmlAttr="onclick=&quot;javascript:window.top.addTabs({'owdoc':window,'title':'xxxx', 'url':'/DemoTable/DemoTableAddOrEdit'}); &quot; class='add'" elementAuth="4" />
        <OperateControl text="删除" htmlAttr="id='btnDelete' class='delete'" elementAuth="5" />
        <OperateControl text="导出" htmlAttr="id='btnImport' onclick='exportExcel();'" elementAuth="6" />
      </OperateControls>
      <SearchControls assemblyName="Frxs.Platform.Model" typeName="Frxs.Platform.Model.Demo.DemoTable" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="Name" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="Age" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="Gender" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetGender" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="Birthday" controlType="text" htmlAttr=" class = 'Wdate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-MM-dd',maxDate:'%y-%M-%d'})&quot; " />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblDemoTable" assemblyName="Frxs.Platform.Model" typeName="Frxs.Platform.Model.Demo.DemoTable" queryUrl="../DemoTable/GetDemoTablePageList?a=1&amp;b=2" isSingleSelect="false" isShowSeq="false">
          <Fields key="Id">Name,Age,GenderStr,Birthday</Fields>
          <HiddenFields>Id</HiddenFields>
          <EditFields modifyUrl="../DemoTable/ModifyField">Name,Age</EditFields>
          <Width>100px,80px,60px,150px</Width>
          <OrderFields>Name,Age,GenderStr,Birthday</OrderFields>
          <Action>
            <View linkTitle="查看" value="/DemoTable/DemoTableView?Id={0}" elementAuth="1" />
            <Edit linkTitle="修改" value="/DemoTable/DemoTableAddOrEdit?Id={0}" elementAuth="2" />
            <Delete linkTitle="删除" elementAuth="3" />
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript" src="/Scripts/plugin/jQuery/jquery.cookie.js"></script>
          <script type="text/javascript" src="/Scripts/bussiness/demoTable/demoTableList.js"></script>
        ]]>
      </Script>
    </Page>
    
    
    
    
    
    
    
    <!--
      一个页面配置一个Page节点，必需节点
      name属性为列表标识，必需属性
      title属性为页面标题，必需属性
      pageAuth属性为页面权限，非必需属性
    -->

    <Page name="BuyOrderPreList" title="采购订单列表" pageAuth="28">
      <OperateControls>
        <OperateControl text="查看"  class='Look_Btn' href="" htmlAttr="id='btnEdit'"  elementAuth="34"/>
        <OperateControl text="添加"  class='Add_Btn' href="" htmlAttr="onclick=&quot;javascript:window.top.addTabs('添加采购订单','/BuyOrderPre/BuyOrderPreAddOrEdit'); &quot;"  elementAuth="34"/>
        <OperateControl text="删除" class='Eel_Btn' htmlAttr="id='btnDelete'" elementAuth="46" />
        <OperateControl text="确认" class='Post_Btn' htmlAttr="id='btnConf'" elementAuth="46" />
        <OperateControl text="过账" class='Bill_Btn' htmlAttr="id='btnPosting'" elementAuth="46" />
        <OperateControl text="导出" class='Export_Btn' htmlAttr="id='btnExport'" elementAuth="46" />
      </OperateControls>
      <SearchControls assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.BuyOrderPreModel" advancedSearchRow="2">
        <Row>
          <Column>
            <SearchControl propertyInfoName="BuyID" controlType="text" desc="采购单号"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="VendorCodeOrName" controlType="text" desc="供应商名称或编号"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="WName" controlType="select" desc="仓库" getDataKey="GetWCList"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="Status"  controlType="select" htmlAttr="id=Status" desc="状态"/>
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="ProductId" controlType="text" desc="商品编号"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="ProductName" controlType="text" desc="商品名称"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="OrderDate" name="StartDate" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="-" />
            <SearchControl propertyInfoName="OrderDate" name="EndDate" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" />
          </Column>

        </Row>

      </SearchControls>
      <Tables>
        <Table name="tblBuyOrderPre" assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.BuyOrderPreModel" queryUrl="../BuyOrderPre/GetBuyOrderPreList" isSingleSelect="false" columnDisplayLength="20" rowDbClickFun="rowDbClick" isFreezeHeader="true">
          <Fields key="BuyID">BuyID,StatusStr,OrderDate,WNameStr,VendorName,BuyEmpName,TotalOrderAmt</Fields>
          <HiddenFields>BuyID</HiddenFields>
          <Width>100px,100px,100px,280px,150px,150px,150px</Width>
          <OrderFields></OrderFields>
          <Action>
            <!--<Edit linkTitle="编辑" value="/Shelf/ShelfAddOrEdit?Id={0}" elementAuth="39"/>-->
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[          
            <script type="text/javascript" src="../Scripts/bussiness/buyorder/buyorderprelist.js"></script>   
            <script type="text/javascript" src="../Scripts/plugin/easyui/easyui-lang-zh_CN.js" ></script>
        ]]>
      </Script>
    </Page>

    <Page name="BuyBackPreList" title="采购退货列表" pageAuth="28">
      <OperateControls>
        <OperateControl text="查看" class='Look_Btn' href="" htmlAttr="id=&quot;btnEdit&quot;"  elementAuth="34"/>
        <OperateControl text="添加" class='Add_Btn' href="" htmlAttr="onclick=&quot;javascript:window.top.addTabs('添加退货订单','/BuyBackPre/BuyBackPreAddOrEdit'); &quot;"  elementAuth="34"/>
        <OperateControl text="删除" class='Eel_Btn' htmlAttr="id=&quot;btnDelete&quot;" elementAuth="46" />
        <OperateControl text="确认" class='Post_Btn' htmlAttr="id=&quot;btnConf&quot;" elementAuth="46" />
        <OperateControl text="过账"  class='Bill_Btn' htmlAttr="id=&quot;btnPosting&quot;" elementAuth="46" />
        <OperateControl text="导出"  class='Export_Btn' htmlAttr="id=&quot;btnExport&quot;" elementAuth="46" />
      </OperateControls>
      <SearchControls assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.BuyBackPreModel" advancedSearchRow="2">
        <Row>
          <Column>
            <SearchControl propertyInfoName="BackID" controlType="text" desc="退货单号"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="VendorCodeOrName" controlType="text" desc="供应商名称或编号"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="WName" controlType="select" desc="仓库" getDataKey="GetWCList"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="Status"  controlType="select" htmlAttr="id=Status" desc="状态"/>
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="ProductId" controlType="text" desc="商品编号"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="ProductName" controlType="text" desc="商品名称"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="OrderDate" name="StartDate" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="-" />
            <SearchControl propertyInfoName="OrderDate" name="EndDate" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" />
          </Column>

        </Row>

      </SearchControls>
      <Tables>
        <Table name="tblBuyBackPre" assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.BuyBackPreModel" queryUrl="../BuyBackPre/GetBuyBackPreList" isSingleSelect="false" columnDisplayLength="20">
          <Fields key="BackID">BackID,StatusStr,OrderDate,WNameStr,VendorName,BuyEmpName,TotalAmt</Fields>
          <HiddenFields>BackID</HiddenFields>
          <Width>100px,100px,100px,280px,150px,150px,150px</Width>
          <OrderFields></OrderFields>
          <Action>
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[          
            <script type="text/javascript" src="../Scripts/bussiness/buyback/buybackprelist.js"></script>   
        ]]>
      </Script>
    </Page>

    <Page name="SaleBackPreList" title="销售退货列表" pageAuth="28">
      <OperateControls>
        <OperateControl text="查看" class='Look_Btn' href="" htmlAttr="id=&quot;btnEdit&quot;"  elementAuth="34"/>
        <OperateControl text="添加" class='Add_Btn' href="" htmlAttr="onclick=&quot;javascript:window.top.addTabs('添加退货订单','/SaleBackPre/SaleBackPreAddOrEdit'); &quot;"  elementAuth="34"/>
        <OperateControl text="删除" class='Eel_Btn' htmlAttr="id=&quot;btnDelete&quot;" elementAuth="46" />
        <OperateControl text="确认" class='Post_Btn' htmlAttr="id=&quot;btnConf&quot;" elementAuth="46" />
        <OperateControl text="过账"  class='Bill_Btn' htmlAttr="id=&quot;btnPosting&quot;" elementAuth="46" />
        <OperateControl text="导出"  class='Export_Btn' htmlAttr="id=&quot;btnExport&quot;" elementAuth="46" />
      </OperateControls>
      <SearchControls assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.SaleBackPreModel" advancedSearchRow="2">
        <Row>
          <Column>
            <SearchControl propertyInfoName="BackID" controlType="text" desc="退货单号"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="VendorCodeOrName" controlType="text" desc="供应商名称或编号"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="WName" controlType="select" desc="仓库" getDataKey="GetWCList"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="Status"  controlType="select" htmlAttr="id=Status" desc="状态"/>
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="ProductId" controlType="text" desc="商品编号"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="ProductName" controlType="text" desc="商品名称"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="OrderDate" name="StartDate" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="-" />
            <SearchControl propertyInfoName="OrderDate" name="EndDate" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" />
          </Column>

        </Row>

      </SearchControls>
      <Tables>
        <Table name="tblBuyBackPre" assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.SaleBackPreModel" queryUrl="../SaleBackPre/GetSaleBackPreList" isSingleSelect="false" columnDisplayLength="20">
          <Fields key="BackID">BackID,StatusStr,OrderDate,WNameStr,VendorName,BuyEmpName,TotalAmt</Fields>
          <HiddenFields>BackID</HiddenFields>
          <Width>100px,100px,100px,280px,150px,150px,150px</Width>
          <OrderFields></OrderFields>
          <Action>
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[          
            <script type="text/javascript" src="../Scripts/bussiness/saleback/salebackprelist.js"></script>   
        ]]>
      </Script>
    </Page>



    <Page name="ShelfList" title="货位管理列表" pageAuth="28">
      <OperateControls>
        <OperateControl text="新增" href="" htmlAttr="onclick=&quot;javascript:OpenDialogOrAddTab('dialog','add',''); &quot;"  elementAuth="34" class="add_Btn"/>
        <OperateControl text="编辑" htmlAttr="id=&quot;btnEdit&quot;" elementAuth="45" class="Edit_Btn"/>
        <OperateControl text="删除" htmlAttr="id=&quot;btnDelete&quot;" elementAuth="46" class="Eel_Btn"/>
      </OperateControls>
      <SearchControls assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.ShelfModel" advancedSearchRow="2">
        <Row>
          <Column>
            <SearchControl propertyInfoName="ShelfCode" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ShelfAreaID" controlType="select" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="Status"  controlType="select" getDataKey="GetStatus"/>
          </Column>
        </Row>

      </SearchControls>
      <Tables>
        <Table name="tblShelf" assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.ShelfModel" queryUrl="../Shelf/GetShelfList" isSingleSelect="false" columnDisplayLength="20"  rowDbClickFun="rowDbClick">
          <Fields key="ShelfID">ShelfCode,WName,ShelfAreaName,ShelfType,StatusStr</Fields>
          <HiddenFields>ShelfID</HiddenFields>
          <Width>100px,280px,100px,150px,150px</Width>
          <OrderFields></OrderFields>

        </Table>
      </Tables>
      <Script>
        <![CDATA[          
            <script type="text/javascript" src="../Scripts/bussiness/shelf/shelfList.js"></script>   
               
        ]]>
      </Script>
    </Page>

    <Page name="WarehouseList" title="仓库管理列表" pageAuth="28">
      <OperateControls>
        <OperateControl text="新增" href="" htmlAttr="onclick=&quot;javascript:OpenDialogOrAddTab('dialog','add',''); &quot;"  elementAuth="34" class="add_Btn"/>
        <OperateControl text="删除" htmlAttr="id=&quot;btnDelete&quot;" elementAuth="46" class="Eel_Btn"/>
      </OperateControls>
      <SearchControls assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.WarehouseModel" advancedSearchRow="2">
        <Row>
          <Column>
            <SearchControl propertyInfoName="WCode" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WName" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WContact" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="IsFreeze" controlType="text" />
          </Column>
        </Row>

      </SearchControls>
      <Tables>
        <Table name="tblWarehouse" assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.WarehouseModel" queryUrl="../Warehouse/GetWarehouseList" isSingleSelect="" columnDisplayLength="20">
          <Fields key="WID">WCode,WName,WContact,IsFreeze</Fields>
          <HiddenFields>WID</HiddenFields>
          <Width>100px,100px,150px,150px</Width>
          <OrderFields></OrderFields>
        </Table>
      </Tables>
      <Script>
        <![CDATA[          
            <script type="text/javascript" src="../Scripts/bussiness/Warehouse/WarehouseList.js"></script>   
               
        ]]>
      </Script>
    </Page>

    <Page name="ShelfAreaList" title="货区管理列表" pageAuth="29">
      <OperateControls>
        <OperateControl text="新增" href="" htmlAttr="onclick=&quot;javascript:OpenDialogOrAddTab('dialog','add',''); &quot;"  elementAuth="34" class="add_Btn"/>
        <OperateControl text="编辑" htmlAttr="id=&quot;btnEdit&quot;" elementAuth="45" class="Edit_Btn"/>
        <OperateControl text="删除" htmlAttr="id=&quot;btnDelete&quot;" elementAuth="46" class="Eel_Btn"/>
      </OperateControls>
      <SearchControls assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.ShelfAreaModel" advancedSearchRow="2">
        <Row>

        </Row>

      </SearchControls>
      <Tables>
        <Table name="tblWAdvertisement" assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.ShelfAreaModel" queryUrl="../ShelfArea/GetShelfAreaList" isSingleSelect="false" columnDisplayLength="20"  rowDbClickFun="rowDbClick">
          <Fields key="ShelfAreaID">ShelfAreaCode,ShelfAreaName,SerialNumber,PickingMaxRecord,Remark</Fields>
          <HiddenFields>ShelfAreaID</HiddenFields>
          <Width>100px,280px,100px,150px,150px</Width>
          <OrderFields></OrderFields>

        </Table>
      </Tables>
      <Script>
        <![CDATA[          
            <script type="text/javascript" src="../Scripts/bussiness/shelfArea/shelfAreaList.js"></script>   
               
        ]]>
      </Script>
    </Page>

    <Page name="WarehouseEmpList" title="账户管理列表" pageAuth="29">
      <OperateControls>
        <OperateControl text="新增" href="" htmlAttr="onclick=&quot;javascript:OpenDialogOrAddTab('dialog','add',''); &quot;"  elementAuth="34" class="add_Btn"/>
        <OperateControl text="编辑" htmlAttr="id=&quot;btnEdit&quot;" elementAuth="45" class="Edit_Btn"/>
        <OperateControl text="删除" htmlAttr="id=&quot;btnDelete&quot;" elementAuth="46" class="Eel_Btn"/>
        <OperateControl text="冻结" htmlAttr="id=&quot;btnIsFrozen&quot;" elementAuth="47" class="Freeze_Btn" />
        <OperateControl text="解冻" htmlAttr="id=&quot;btnFrozen&quot;" elementAuth="48" class="Thaw_Btn"/>
      </OperateControls>
      <SearchControls assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.WarehouseEmpModel" advancedSearchRow="2">
        <Row>
          <Column>
            <SearchControl propertyInfoName="EmpName" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="UserAccount" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="UserType"  controlType="select" getDataKey="GetUserType"/>
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="IsFrozen"  controlType="select" getDataKey="GetStatus"/>
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblWarehouseEmp" assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.WarehouseEmpModel" queryUrl="../WarehouseEmp/GetWarehouseEmpList" isSingleSelect="false" columnDisplayLength="20"  rowDbClickFun="rowDbClick">
          <Fields key="EmpID">WName,EmpName,UserAccount,UserTypeStr,StatusStr</Fields>
          <HiddenFields>EmpID,IsFrozen</HiddenFields>
          <Width>100px,280px,100px,150px,150px</Width>
          <OrderFields></OrderFields>

        </Table>
      </Tables>
      <Script>
        <![CDATA[          
            <script type="text/javascript" src="../Scripts/bussiness/WarehouseEmp/WarehouseEmpList.js"></script>   
               
        ]]>
      </Script>
    </Page>
    <Page name="VendorList" title="供应商列表" pageAuth="29">
      <OperateControls>
        <OperateControl text="新增" href="" htmlAttr="onclick=&quot;javascript:OpenDialogOrAddTab('dialog','add',''); &quot;"  elementAuth="34" class="add_Btn"/>
        <OperateControl text="查看" htmlAttr="id=&quot;btnView&quot;" elementAuth="34" class="Look_Btn"  />
        <OperateControl text="编辑" htmlAttr="id=&quot;btnEdit&quot;" elementAuth="45" class="Edit_Btn"/>
        <OperateControl text="删除" htmlAttr="id=&quot;btnDelete&quot;" elementAuth="46" class="Eel_Btn"/>
        <OperateControl text="冻结" htmlAttr="id=&quot;btnIsFrozen&quot;" elementAuth="47" class="Freeze_Btn" />
        <OperateControl text="解冻" htmlAttr="id=&quot;btnFrozen&quot;" elementAuth="48" class="Thaw_Btn"/>
      </OperateControls>
      <SearchControls assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.VendorQuery" advancedSearchRow="2">
        <Row>
          <Column>
            <SearchControl propertyInfoName="VendorCode" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="VendorName" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="VendorTypeID" controlType="select" getDataKey="GetVendorTypes"/>
          </Column>
          </Row>
          <Row>
          <Column>
            <SearchControl propertyInfoName="LinkMan"  controlType="text"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="SettleTimeType"  controlType="text"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="Status"  controlType="select" getDataKey="GetStatus"/>
          </Column>
        </Row>       
      </SearchControls>
      <Tables>
        <Table name="tbVendorList" assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.Vendor" queryUrl="../Vendor/VendorList" isSingleSelect="false" columnDisplayLength="20"  rowDbClickFun="rowDbClick">
          <Fields key="VendorID">VendorCode,VendorName,LinkMan,Telephone,VendorTypeName,SettleTimeTypeName,StatusName,FullAddress</Fields>
          <HiddenFields>VendorID,Status</HiddenFields>
          <Width>80px,200px,80px,150px,100px,120px,120px,280px</Width>
          <OrderFields>VendorCode</OrderFields>
        </Table>
      </Tables>
      <Script>
        <![CDATA[          
           <script type="text/javascript" src="../Scripts/bussiness/vendor/vendorList.js"></script>                  
        ]]>
      </Script>
    </Page>

    <Page name="WarehouseLineList" title="送货线路管理列表" pageAuth="30">
      <OperateControls>
        <OperateControl text="新增" href="" htmlAttr="onclick=&quot;javascript:OpenDialogOrAddTab('dialog','add',''); &quot;"  elementAuth="34" class="add_Btn"/>
        <OperateControl text="编辑" htmlAttr="id=&quot;btnEdit&quot;" elementAuth="45" class="Edit_Btn"/>
        <OperateControl text="删除" htmlAttr="id=&quot;btnDelete&quot;" elementAuth="46" class="Eel_Btn"/>
        <OperateControl text="编辑门店顺序" htmlAttr="id=&quot;btnOrder&quot;" elementAuth="47" class="Sort_Btn" />
      </OperateControls>
      <SearchControls assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.WarehouseLineModel" advancedSearchRow="2">
        <Row>
          <Column>
            <SearchControl propertyInfoName="LineName" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="EmpName" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="UserMobile" controlType="text" />
          </Column>
        </Row>
        <Row>
          <Column>
          <SearchControl propertyInfoName="SendW"  controlType="select"  htmlAttr="id=SendW"/>
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblWarehouseLine" assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.WarehouseLineModel" queryUrl="../WarehouseLine/GetWarehouseLineList" isSingleSelect="false" columnDisplayLength="20"  rowDbClickFun="rowDbClick">
          <Fields key="LineID">LineName,EmpName,UserMobile,ShopNum,SendW,SerialNumber</Fields>
          <HiddenFields>LineID</HiddenFields>
          <Width>100px,280px,100px,150px,150px,150px</Width>
          <OrderFields></OrderFields>

        </Table>
      </Tables>
      <Script>
        <![CDATA[          
            <script type="text/javascript" src="../Scripts/bussiness/warehouseLine/warehouseLineList.js"></script>   
               
        ]]>
      </Script>
    </Page>

    <Page name="WarehouseEmpShelfList" title="送货员管理列表" pageAuth="29">
      <OperateControls>        
        <OperateControl text="编辑" htmlAttr="id=&quot;btnEdit&quot;" elementAuth="45" class="Edit_Btn"/>        
      </OperateControls>
      <SearchControls assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.WarehouseEmpShelfModel" advancedSearchRow="2">
        <Row>
          <Column>
            <SearchControl propertyInfoName="EmpName" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="UserAccount" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ShelfAreaID"  controlType="select" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="IsFrozen"  controlType="select" getDataKey="GetStatus"/>
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblWarehouseEmpShelf" assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.WarehouseEmpShelfModel" queryUrl="../WarehouseEmpShelf/GetWarehouseEmpShelfList" isSingleSelect="false" columnDisplayLength="20"  rowDbClickFun="rowDbClick">
          <Fields key="EmpID">WName,EmpName,UserAccount,StatusStr,ShelfAreaName,ShelfNum</Fields>
          <HiddenFields>EmpID,ShelfAreaID</HiddenFields>
          <Width>100px,280px,100px,150px,150px,150px</Width>
          <OrderFields></OrderFields>

        </Table>
      </Tables>
      <Script>
        <![CDATA[          
            <script type="text/javascript" src="../Scripts/bussiness/warehouseEmpShelf/warehouseEmpShelfList.js"></script>  
           
        ]]>
      </Script>
    </Page>

    <!--门店管理列表-->
    <Page name="ShopList" title="门店管理列表">
      <OperateControls>        
        <OperateControl text="查看" htmlAttr="id=&quot;btnView&quot;" elementAuth="34" class="Look_Btn"  />
        <OperateControl text="编辑" htmlAttr="id=&quot;btnEdit&quot;" elementAuth="46" class="Edit_Btn" />
        <OperateControl text="冻结" htmlAttr="id=&quot;btnIsFrozen&quot;" elementAuth="46" class="Freeze_Btn" />
        <OperateControl text="解冻" htmlAttr="id=&quot;btnFrozen&quot;" elementAuth="46" class="Thaw_Btn" />
      </OperateControls>                                                          
      <SearchControls assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.ShopSearchModel" advancedSearchRow="3">
        <Row>
          <Column>
            <SearchControl propertyInfoName="ShopCode" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ShopName" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ShopAccount" controlType="text" />
          </Column>

        </Row>
        <Row>

          <Column>
            <SearchControl propertyInfoName="Status" controlType="select"  getDataKey="GetShopStatus" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="LinkMan" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="LineID" controlType="select"  getDataKey="GetWarehouseLine" />
          </Column>
        </Row>
        
      </SearchControls>
      <Tables>
        <Table name="tblShop" assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.ShopListModel" queryUrl="../Shop/GetShopList" isSingleSelect="false" columnDisplayLength="20" rowDbClickFun="rowDbClick">
          <Fields key="ShopID">ShopCode,ShopName,ShopAccount,LinkMan,Telephone,LineName,SerialNumberStr,FullAddress,StatusStr</Fields>
          <HiddenFields>ShopID</HiddenFields>
          <Width>100px,150px,100px,100px,60px,100px,150px,250px,50px</Width>
          <OrderFields></OrderFields>
        </Table>

      </Tables>
      <Script>
        <![CDATA[          
            <script type="text/javascript" src="../Scripts/bussiness/shop/shopList.js"></script>     
        ]]>
      </Script>
    </Page>

    <Page name="ShopGroupList" title="分组管理列表" pageAuth="29">
      <OperateControls>        
        <OperateControl text="新增" href="" htmlAttr="onclick=&quot;javascript:OpenDialogOrAddTab('dialog','add',''); &quot;"  elementAuth="34" class="add_Btn"/>
        <OperateControl text="编辑" htmlAttr="id=&quot;btnEdit&quot;" elementAuth="45" class="Edit_Btn"/>
        <OperateControl text="删除" htmlAttr="id=&quot;btnDelete&quot;" elementAuth="46" class="Eel_Btn"/>
      </OperateControls>
      <SearchControls assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.ShopGroupSearchModel" advancedSearchRow="2">
        <Row>
          <Column>
            <SearchControl propertyInfoName="GroupCode" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="GroupName" controlType="text" />
          </Column>
        </Row>

      </SearchControls>
      <Tables>
        <Table name="tblShopGroup" assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.ShopGroupListModel" queryUrl="../ShopGroup/GetShopGroupList" isSingleSelect="false" columnDisplayLength="20"  rowDbClickFun="rowDbClick" isFreezeHeader="true">
          <Fields key="GroupID">GroupCode,GroupName,Remark,ShopNum,CreateUserName,CreateTime</Fields>
          <HiddenFields>GroupID</HiddenFields>
          <Width>100px,280px,100px,150px,150px,150px</Width>
          <OrderFields></OrderFields>

        </Table>
      </Tables>
      <Script>
        <![CDATA[          
            <script type="text/javascript" src="../Scripts/bussiness/shopgroup/shopgroupList.js"></script>   
               
        ]]>
      </Script>
    </Page>
    
    <Page name="PrototypeApplyList">
      <!--
        OperateControls节点内放置操作控件（如增加、导出），非必需节点
        OperateControl节点为单个操作控件（如增加），如果存在OperateControls节点则为必需节点，否则为非必需节点
        text属性为控件显示文本，必需属性
        authCode属性为控件权限码，非必需属性
        htmlAttr属性为控件html属性，非必需属性
      -->
      <OperateControls>
        <OperateControl text="新增" authCode="AUTH_FUNC_PROTOTYPE_APPLY_ADD" htmlAttr="onclick=&quot;javascript:parent.addTab('新建样机申请单','/SANY.DMS.Group.WebUIMVC4/Group/PrototypeApply/ApplyAddOrEdit',false,'新建样机申请单'); &quot;" />
      </OperateControls>
      <!--
        SearchControls节点内放置查询控件，必需节点
        Row节点对应表格tr，必需节点
        Column节点对应表格td，必需节点（请注意：第一行最后一列默认放置查询及重置按钮）
        SearchControl节点为单个查询控件，必需节点
        assemblyName属性为数据查询表格对应的程序集，需保证WebUI添加了对该程序集的引用，必需属性
        typeName属性为数据查询表格对应的类全名，必需属性
        propertyInfoName属性必须对应数据查询模型属性名，displayTitle属性为自定义标题（非属性查询条件），与displayTitle属性必须且只允许存在一个
        controlType属性为控件类型，目前有text、select、date三种，如需添加新控件类型需修改代码，必需属性
        htmlAttr属性为添加的html属性，按现有格式添加即可，非必需属性
        unionText属性为多个控件之间的连接文本，主要存在于日期区间，非必需属性
        getDataKey属性为数据来源key，此处值为代码中写死，如需添加新数据来源需修改代码，非必需属性
        param属性为数据来源key中需要的参数，此处值必须对应常量类中的字段名，多个参数请用逗号分隔，非必需属性，无此值时取默认值null
        advancedSearchRow属性为高级搜索表格显示行数，整数值，非必需属性，无此值时取默认值1
      -->
      <SearchControls assemblyName="SANY.DMS.Group.Prototype.BizModel" typeName="SANY.DMS.Group.Prototype.BizModel.Apply.PrototypeApplyInfoDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="ApplyNo" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="OrgName" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetOrgsByCurrUser" param="AUTH_PROTOTYPE_APPLY" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="CreatorName" controlType="text" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="CreateDate" name="StartDate" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="-" />
            <SearchControl propertyInfoName="CreateDate" name="EndDate" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WorkflowStatusName" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="WORKFLOW_STATUS_ID" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="NodeName" controlType="select" getDataKey="GetApproveNodes" param="WFPrototypeApply" />
          </Column>
        </Row>
      </SearchControls>
      <!--
        Tables节点为页面上table控件，可有多个table，必需节点
        Table节点为对应表格，必需节点
        name属性为表格name，必需属性
        desc属性为表格显示名称，非必需属性
        assemblyName属性为数据查询模型对应的程序集，需保证WebUI添加了对该程序集的引用，必需属性
        typeName属性为数据查询模型对应的类全名，必需属性
        queryUrl属性为数据查询Controller/Action地址，必需属性
        isSingleSelect属性为数据是否为单选，为true时第一列为单选按钮，为false是第一列为复选按钮，为空时则无控件，非必需属性
        isShowSeq属性为控制首列（序号列）是否显示。如果isSingleSelect属性存在，且isShowSeq属性不存在或为true，则显示首列和序号。如果isSingleSelect属性存在，且isShowSeq属性存在且为false，则显示首列，不显示序号，非必需属性。
        columnDisplayLength属性为控制表格字段显示长度，非必需属性
        Fields节点为列表中显示字段，必须对应数据查询模型属性名，至少有一个值，用逗号分隔，必需节点
        key属性为对应数据查询模型中作为主键的属性，必需属性
        Width节点为列表中显示字段宽度，可为像素或百分比，值数量需与Fields节点值数量对应，非必需节点
        OrderFields节点为列表中排序字段，必须对应数据查询模型属性名，用逗号分隔，非必需节点
        HiddenFields节点为列表中隐藏字段，必须对应数据查询模型属性名，用逗号分隔，非必需节点
        EditFields节点为列表中可直接编辑字段，必须对应数据查询模型属性名，用逗号分隔，非必需节点。如果存在该节点，必须指定modifyUrl属性
        Action节点为列表执行动作，非必需节点
        View节点为弹出页面查看
        Edit节点为弹出页面修改
        还可以配置其他节点
        linkTitle属性为操作链接标题，必需属性
        value属性为操作链接地址，必需属性
        mode属性为控制链接打开方式，无此节点以window.open方式打开，有此节点并赋值为addTab则以easyUI的tab方式打开
        authCode属性为操作链接权限码，此处值必须对应常量类中的字段名，非必需属性
        elementAuth属性为元素查看权限
      -->
      <Tables>
        <Table name="tblApply" assemblyName="SANY.DMS.Group.Prototype.BizModel" typeName="SANY.DMS.Group.Prototype.BizModel.Apply.PrototypeApplyInfoDTO" queryUrl="../PrototypeApply/GetPageList">
          <Fields key="ApplyId">ApplyNo,OrgName,WorkflowStatusName,NodeName,CreatorName,CreateDate,ApplyAmount,AlreadyAssignAmount</Fields>
          <Width>150px,100px,50px,80px,50px,80px,50px,50px</Width>
          <OrderFields>ApplyNo,WorkflowStatusName,NodeName,CreatorName,CreateDate</OrderFields>
          <Action>
            <View linkTitle="查看样机申请单" value="/SANY.DMS.Group.WebUIMVC4/Group/PrototypeApply/ApplyView?applyId={0}" authCode="AUTH_FUNC_PROTOTYPE_APPLY_VIEW" />
            <Edit linkTitle="修改样机申请单" value="/SANY.DMS.Group.WebUIMVC4/Group/PrototypeApply/ApplyAddOrEdit?applyId={0}" authCode="AUTH_FUNC_PROTOTYPE_APPLY_MODIFY" />
          </Action>
        </Table>
      </Tables>
      <!--
        Script节点为需写入页面的js，非必需节点
        js写在CDATA中，所有字符不需要转义。注意：该script块将是页面动态加载的最后一个script块
      -->
    </Page>
    <Page name="SalesIntentSummarizeList">
      <SearchControls assemblyName="SANY.DMS.Group.Sales.BizModel" typeName="SANY.DMS.Group.Sales.BizModel.Trade.SalesAgentIntentInfoDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="IntentNo" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="TerminalName" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SellName" controlType="text" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="SapCusId" controlType="text" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WorkflowStatusName" name="WorkflowStatus" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="WORKFLOW_STATUS_ID" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="NodeName" controlType="select" getDataKey="GetApproveNodes" param="WFSalesCustIntent,WFSalesAgentIntent" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="PaymentTypeName" name="PaymentType" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="PAYMENT_TYPE_ID" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="CreateDate" name="StartDate" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="-" />
            <SearchControl propertyInfoName="CreateDate" name="EndDate" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="OrgName" name="Orgs" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetOrgsByCurrUser" param="Intent_Pandect_CustIntent" />
          </Column>
          <Column>
            <SearchControl name="FinancingInfoFlag" displayTitle="融资信息" controlType="select" />
          </Column>
          <Column>
            <SearchControl name="IntentType" displayTitle="意向类型" controlType="select" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblIntent" desc="客户销售意向" assemblyName="SANY.DMS.Group.Sales.BizModel" typeName="SANY.DMS.Group.Sales.BizModel.Trade.SalesIntentInfoDTO" queryUrl="../CustIntent/GetList">
          <Fields key="IntentId">IntentNo,SellTypeName,WorkflowStatusName,VenderName,BuyName,PaymentTypeName,OperName,CreateDate,UpdateDate,SellName,DeliveryScale,FinancingInfoFlag</Fields>
          <OrderFields>IntentNo,SellTypeName,WorkflowStatusName,VenderName,BuyName,PaymentTypeName,OperName,CreateDate,UpdateDate,SellName,DeliveryScale</OrderFields>
          <Action>
            <View linkTitle="查看客户意向" value="/SANY.DMS.Group.WebUIMVC4/Group/CustIntent/CustIntentView?IntendId={0}" />
            <Edit linkTitle="修改客户意向" value="/SANY.DMS.Group.WebUIMVC4/Group/CustIntent/CustIntentEdit?IntendId={0}" />
          </Action>
        </Table>
        <Table name="tblAgentIntent" desc="代理商采购意向" assemblyName="SANY.DMS.Group.Sales.BizModel" typeName="SANY.DMS.Group.Sales.BizModel.Trade.SalesAgentIntentInfoDTO" queryUrl="../SalesAgentIntent/GetPageList">
          <Fields key="IntentId">IntentNo,SellTypeName,WorkflowStatusName,OrgName,BuyName,TerminalName,PaymentTypeName,OperName,CreateDate,UpdateDate,SellName,DeliveryScale</Fields>
          <OrderFields>IntentNo,SellTypeName,WorkflowStatusName,BuyName,PaymentTypeName,OperName,CreateDate,UpdateDate,SellName,DeliveryScale</OrderFields>
          <Action>
            <View linkTitle="查看代理商采购意向" value="/SANY.DMS.Group.WebUIMVC4/Group/SalesAgentIntent/AgentIntentView?intentId={0}" />
            <Edit linkTitle="修改代理商采购意向" value="/SANY.DMS.Group.WebUIMVC4/Group/SalesAgentIntent/AgentIntentEdit?intentId={0}" />
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
          $(function(){
            $("select[name='FinancingInfoFlag']").append("<option value='0'>未完成</option><option value='1'>已完成</option>");
            $("select[name='IntentType']").append("<option value='1'>客户销售</option><option value='2'>代理商采购</option>");
          
            $("#aSearch").unbind("click").click(function(){
              var divIntent=$("table[name='tblIntent']").parents("div[class='result2']");
              var divAgentIntent=$("table[name='tblAgentIntent']").parents("div[class='result2']");
              switch($("select[name='IntentType']").val()){
                case "1":
                  divIntent.show();
                  divAgentIntent.hide();
                  $("table[name='tblIntent']").children("tfoot").children("tr:eq(0)").children("th[name='pagerMain']").get(0).SetTotalCount(0);
                       $("table[name='tblIntent']").children("tfoot").children("tr:eq(0)").children("th[name='pagerMain']").get(0).SetPageIndex(1);
                  tblIntentList.List();
                  break;
                 case "2":
                  divIntent.hide();
                  divAgentIntent.show();
                  $("table[name='tblAgentIntent']").children("tfoot").children("tr:eq(0)").children("th[name='pagerMain']").get(0).SetTotalCount(0);
                       $("table[name='tblAgentIntent']").children("tfoot").children("tr:eq(0)").children("th[name='pagerMain']").get(0).SetPageIndex(1);
                  tblAgentIntentList.List();
                  break;
                 default:
                  divIntent.show();
                  divAgentIntent.show();
                  $("table[name='tblIntent']").children("tfoot").children("tr:eq(0)").children("th[name='pagerMain']").get(0).SetTotalCount(0);
                       $("table[name='tblIntent']").children("tfoot").children("tr:eq(0)").children("th[name='pagerMain']").get(0).SetPageIndex(1);
                  tblIntentList.List();
                  $("table[name='tblAgentIntent']").children("tfoot").children("tr:eq(0)").children("th[name='pagerMain']").get(0).SetTotalCount(0);
                       $("table[name='tblAgentIntent']").children("tfoot").children("tr:eq(0)").children("th[name='pagerMain']").get(0).SetPageIndex(1);
                  tblAgentIntentList.List();
                  break;
              }
            });
          });
          </script>
        ]]>
      </Script>
    </Page>
    <Page name="ContractPurrtnList" desc="回购申请列表">
      <OperateControls>
        <OperateControl text="新增" authCode="AUTH_NT_CONTRACT_PURRTN_APP_ADD" htmlAttr="onclick=&quot;javascript:parent.addTab('新增回购申请','/SANY.DMS.Group.WebUIMVC4/Group/FinanceAfterLoan/ContractPurrtnAddOrEdit',false,'新增回购申请'); &quot;" />
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.AfterLoan.NtContractPurrtnAppDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="AppNo" controlType="text" desc="业务流水号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ContractNo" controlType="text" desc="融资合同号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="LenderName" controlType="text" desc="客户" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="WorkflowStatusName" name="WorkflowStatus" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetCommonCodeByTypeCode" param="WORKFLOW_STATUS_ID" desc="状态" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SupplierName" name="Supplier" controlType="select" getDataKey="GetSuppliers" desc="设备供应商" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SellersName" name="Sellers" controlType="select" getDataKey="GetSellers" param="AUTH_NT_CONTRACT_PURRTN_APP_ADD" desc="销售商" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ProvinceName" name="Province" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="PROV_CODE" desc="省份" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="PeriodBankName" name="PeriodBank" controlType="select" getDataKey="GetBanks" desc="放款银行" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="PeriodSubbankName" name="PeriodSubbank" controlType="select" desc="经办行" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="PeriodAcctNo" controlType="text" desc="还款账号" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblContractPurrtn" assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.AfterLoan.NtContractPurrtnAppDTO" queryUrl="../FinanceAfterLoan/GetContractPurrtnPageList">
          <Fields key="AppId">AppNo,WorkflowStatusName,NodeName,SupplierName,SellersName,ProvinceName,PeriodBankName,PeriodSubbankName,LenderName,PeriodAcctNo,PlusAmt,ExceedNum,ContractNo</Fields>
          <OrderFields>AppNo,WorkflowStatusName,NodeName,SupplierName,SellersName,ProvinceName,PeriodBankName,PeriodSubbankName,LenderName,PeriodAcctNo,PlusAmt,ExceedNum,ContractNo</OrderFields>
          <Action>
            <View linkTitle="查看回购申请" value="/SANY.DMS.Group.WebUIMVC4/Group/FinanceAfterLoan/ContractPurrtnView?appId={0}" authCode="AUTH_NT_CONTRACT_PURRTN_APP_VIEW" />
            <Edit linkTitle="修改回购申请" value="/SANY.DMS.Group.WebUIMVC4/Group/FinanceAfterLoan/ContractPurrtnAddOrEdit?appId={0}" authCode="AUTH_NT_CONTRACT_PURRTN_APP_MODIFY" />
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
          $(function(){
            $("select[name='PeriodBank']").change(function(){
              $.ajax({
                url:"../FinanceBasic/GetSubBanksByBankCode",
                data:{bankCode:$(this).val()},
                success:function(result){
                  var arr = str2Json(result);
                  var periodSubbank=$("select[name='PeriodSubbank']");
                  periodSubbank.children("option").remove();
                  periodSubbank.append("<option value=''></option>");
                  for(var i=0;i<arr.length;i++){
                    periodSubbank.append("<option value='"+arr[i].SubbankCode+"'>"+arr[i].SubbankName+"</option>");
                  }
                }
              });
            });
          });
          </script>
        ]]>
      </Script>
    </Page>
    <Page name="ContractCloseList" desc="结清管理列表">
      <OperateControls>
        <OperateControl text="新增" authCode="AUTH_NT_CONTRACT_CLOSE_APP_ADD" htmlAttr="onclick=&quot;javascript:parent.addTab('新增结清申请','/SANY.DMS.Group.WebUIMVC4/Group/FinanceAfterLoan/ContractCloseAddOrEdit',false,'新增结清申请'); &quot;" />
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.AfterLoan.NtContractCloseAppDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="AppNo" controlType="text" desc="业务流水号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WorkflowStatusName" name="WorkflowStatus" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetCommonCodeByTypeCode" param="WORKFLOW_STATUS_ID" desc="状态" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ContractNo" controlType="text" desc="融资合同号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="LenderName" controlType="text" desc="客户" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="SupplierName" name="Supplier" controlType="select" getDataKey="GetSuppliers" desc="设备供应商" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SellersName" name="Sellers" controlType="select" getDataKey="GetSellers" param="AUTH_NT_CONTRACT_CLOSE_APP_ADD" desc="销售商" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="FProductName" name="FProduct" controlType="select" getDataKey="GetFproductIDAndName" desc="融资产品" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="CloseTypeName" name="CloseType" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="CLOSE_TYPE" desc="结清类型" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="PeriodBankName" name="PeriodBank" controlType="select" getDataKey="GetBanks" desc="放款银行" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="PeriodSubbankName" name="PeriodSubbank" controlType="select" desc="经办行" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ProvinceName" name="Province" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="PROV_CODE" desc="省份" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblContractCloseApp" assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.AfterLoan.NtContractCloseAppDTO" queryUrl="../FinanceAfterLoan/GetContractClosePageList">
          <Fields key="AppId">AppNo,WorkflowStatusName,NodeName,SupplierName,SellersName,FProductName,ProvinceName,PeriodBankName,PeriodSubbankName,LenderName,PeriodAcctNo,CloseTypeName,SubAmt,AllExceedAMT,ContractNo</Fields>
          <OrderFields>AppNo,WorkflowStatusName,NodeName,SupplierName,SellersName,FProductName,ProvinceName,PeriodBankName,PeriodSubbankName,LenderName,PeriodAcctNo,CloseTypeName,SubAmt,AllExceedAMT,ContractNo</OrderFields>
          <Action>
            <View linkTitle="查看结清申请" value="/SANY.DMS.Group.WebUIMVC4/Group/FinanceAfterLoan/ContractCloseView?appId={0}" authCode="AUTH_NT_CONTRACT_CLOSE_APP_VIEW" />
            <Edit linkTitle="修改结清申请" value="/SANY.DMS.Group.WebUIMVC4/Group/FinanceAfterLoan/ContractCloseAddOrEdit?appId={0}" authCode="AUTH_NT_CONTRACT_CLOSE_APP_MODIFY" />
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
          $(function(){
            $("select[name='PeriodBank']").change(function(){
              $.ajax({
                url:"../FinanceBasic/GetSubBanksByBankCode",
                data:{bankCode:$(this).val()},
                success:function(result){
                  var arr = str2Json(result);
                  var periodSubbank=$("select[name='PeriodSubbank']");
                  periodSubbank.children("option").remove();
                  periodSubbank.append("<option value=''></option>");
                  for(var i=0;i<arr.length;i++){
                    periodSubbank.append("<option value='"+arr[i].SubbankCode+"'>"+arr[i].SubbankName+"</option>");
                  }
                }
              });
            });
          });
          </script>
        ]]>
      </Script>
    </Page>
    <Page name="AppraiseList" desc="发货评审列表">
      <OperateControls>
        <OperateControl text="导出" authCode="AUTH_FUNC_SALES_APPRAISE_MANAGER_IMPORT" htmlAttr="onclick='exportExcel();'" />
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.Sales.BizModel" typeName="SANY.DMS.Group.Sales.BizModel.Trade.NtAppraiseDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="SellOrgName" name="SellOrg" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetOrgsByCurrUser" param="AUTH_FUNC_SALES_APPRAISE_MANAGER_VIEW" desc="代理商" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SellAreaName" name="SellArea" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetAllAreas" desc="客户区域" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="IntentNo" controlType="text" desc="销售意向号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SapFcusFid" controlType="text" desc="融资客户码" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="BuyName" controlType="text" desc="买受人" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="DebitorName" controlType="text" desc="借款人" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="CardId" controlType="text" desc="借款人证件" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="FinanceAgentorName" controlType="text" desc="融资管代" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="SellTypeName" name="SellType" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="SELL_TYPE" desc="销售类型" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="PaymentTypeName" name="PaymentType" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="PAYMENT_TYPE_ID" desc="付款方式" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="FmanagerLevel" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="CREDIT_LEVEL_ID" desc="融资经理评级" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="PscontractNo" controlType="text" desc="合同编号" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="SellName" controlType="text" desc="营销代表" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="FmanagerName" controlType="text" desc="融资经理" />
          </Column>
          <Column>
            <!--<SearchControl propertyInfoName="BuyName" controlType="text" desc="实际买受人" />-->
          </Column>
          <Column>
            <SearchControl propertyInfoName="FirstPurchaseType" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="FINANCE_INSURANCE_PURCHASETYPE" desc="保险类别" />
          </Column>
        </Row>
        <Row>
          <Column htmlAttr="colspan='3'">
            <SearchControl propertyInfoName="PeriodNum" name="PeriodNumBegin" controlType="text" htmlAttr="style='width:55px;'" unionText="~" desc="融资期数" />
            <SearchControl propertyInfoName="PeriodNum" name="PeriodNumEnd" controlType="text" htmlAttr="style='width:55px;'" desc="融资期数" />
          </Column>
          <Column htmlAttr="colspan='3'">
            <SearchControl propertyInfoName="PeriodPercent" name="PeriodPercentBegin" controlType="text" htmlAttr="style='width:55px;'" unionText="~" desc="融资比率" />
            <SearchControl propertyInfoName="PeriodPercent" name="PeriodPercentEnd" controlType="text" htmlAttr="style='width:55px;'" desc="融资比率" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblConsignmentAppraise" desc="客户销售发货" assemblyName="SANY.DMS.Group.Sales.BizModel" typeName="SANY.DMS.Group.Sales.BizModel.Trade.NtAppraiseDTO" queryUrl="../CustCredit/GetConsignmentAppraiseList?ConsignmentType=0" isAllowEdit="true">
          <Fields key="ConsignmentId,BnuOrgId">IntentNo,SellOrgName,SellTypeName,PaymentTypeName,WorkflowStatusName,DebitorName,BuyName,PeriodPercent,PeriodNum,OperName,BuyAppraiseDate,PscontractNo,SellName,FmanagerName</Fields>
          <OrderFields>IntentNo,SellOrgName,SellTypeName,PaymentTypeName,WorkflowStatusName,DebitorName,BuyName,PeriodPercent,PeriodNum,OperName,BuyAppraiseDate,PscontractNo,SellName,FmanagerName</OrderFields>
          <HiddenFields>AppraiseId</HiddenFields>
          <Action>
            <View linkTitle="查看客户销售发货" value="/SANY.DMS.Group.WebUIMVC4/Group/SalesConsignment/ConsignmentShow?id={0}&amp;oid={1}" authCode="AUTH_FUNC_SALES_APPRAISE_MANAGER_VIEW" />
            <Edit linkTitle="修改客户销售发货" value="/SANY.DMS.Group.WebUIMVC4/Group/SalesConsignment/ConsignmentShow?id={0}&amp;oid={1}" authCode="AUTH_FUNC_SALES_APPRAISE_MANAGER_EDIT" />
          </Action>
        </Table>
        <Table name="tblAgentConsignmentAppraise" desc="代理商采购发货" assemblyName="SANY.DMS.Group.Sales.BizModel" typeName="SANY.DMS.Group.Sales.BizModel.Trade.NtAppraiseDTO" queryUrl="../CustCredit/GetConsignmentAppraiseList?ConsignmentType=1" isAllowEdit="true">
          <Fields key="AgentConsignmentId,BnuOrgId">IntentNo,SellOrgName,SellTypeName,PaymentTypeName,WorkflowStatusName,DebitorName,BuyName,PeriodPercent,PeriodNum,OperName,BuyAppraiseDate,PscontractNo,SellName,FmanagerName</Fields>
          <OrderFields>IntentNo,SellOrgName,SellTypeName,PaymentTypeName,WorkflowStatusName,DebitorName,BuyName,PeriodPercent,PeriodNum,OperName,BuyAppraiseDate,PscontractNo,SellName,FmanagerName</OrderFields>
          <HiddenFields>AppraiseId</HiddenFields>
          <Action>
            <View linkTitle="查看代理商采购发货" value="/SANY.DMS.Group.WebUIMVC4/Group/SalesAgentConsignment/AgentConsignmentShow?id={0}&amp;oid={1}&amp;AddType=G00502" authCode="AUTH_FUNC_SALES_APPRAISE_MANAGER_VIEW" />
            <Edit linkTitle="修改代理商采购发货" value="/SANY.DMS.Group.WebUIMVC4/Group/SalesAgentConsignment/AgentConsignmentShow?id={0}&amp;oid={1}&amp;AddType=G00502" authCode="AUTH_FUNC_SALES_APPRAISE_MANAGER_EDIT" />
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
          //绑定数据后对已经发货评审过的数据禁用修改链接
          function afterTableDataBind(){
            $("table[name='tblConsignmentAppraise']").children("tbody").children("tr").each(function(){
              if($(this).children("td:first").find("input[type='hidden'][name='hidAppraiseId']").val()!=""){
                $(this).children("td:last").find("a:last").attr("disabled","disabled");
              }
            });
            $("table[name='tblAgentConsignmentAppraise']").children("tbody").children("tr").each(function(){
              if($(this).children("td:first").find("input[type='hidden'][name='hidAppraiseId']").val()!=""){
                $(this).children("td:last").find("a:last").attr("disabled","disabled");
              }
            });
          }
          //导出Excel
          function exportExcel(){
            site_common.ShowProgressBar();
            var sellOrg=$("select[name='SellOrg']").val();
            sellOrg=sellOrg==null?"":sellOrg.Trim();
            var sellArea=$("select[name='SellArea']").val();
            sellArea=sellArea==null?"":sellArea.Trim();
            var intentNo=$("input[name='IntentNo']").val();
            intentNo=intentNo==null?"":intentNo.Trim();
            var sapFcusFid=$("input[name='SapFcusFid']").val();
            sapFcusFid=sapFcusFid==null?"":sapFcusFid.Trim();
            var buyName=$("input[name='BuyName']").val();
            buyName=buyName==null?"":buyName.Trim();
            var debitorName=$("input[name='DebitorName']").val();
            debitorName=debitorName==null?"":debitorName.Trim();
            var cardId=$("input[name='CardId']").val();
            cardId=cardId==null?"":cardId.Trim();
            var financeAgentorName=$("input[name='FinanceAgentorName']").val();
            financeAgentorName=financeAgentorName==null?"":financeAgentorName.Trim();
            var sellType=$("select[name='SellType']").val();
            sellType=sellType==null?"":sellType.Trim();
            var paymentType=$("select[name='PaymentType']").val();
            paymentType=paymentType==null?"":paymentType.Trim();
            var fmanagerLevel=$("select[name='FmanagerLevel']").val();
            fmanagerLevel=fmanagerLevel==null?"":fmanagerLevel.Trim();
            var pscontractNo=$("input[name='PscontractNo']").val();
            pscontractNo=pscontractNo==null?"":pscontractNo.Trim();
            var sellName=$("input[name='SellName']").val();
            sellName=sellName==null?"":sellName.Trim();
            var fmanagerName=$("input[name='FmanagerName']").val();
            fmanagerName=fmanagerName==null?"":fmanagerName.Trim();
            var firstPurchaseType=$("select[name='FirstPurchaseType']").val();
            firstPurchaseType=firstPurchaseType==null?"":firstPurchaseType.Trim();
            var periodNumBegin=$("input[name='PeriodNumBegin']").val();
            periodNumBegin=periodNumBegin==null?"":periodNumBegin.Trim();
            var periodNumEnd=$("input[name='PeriodNumEnd']").val();
            periodNumEnd=periodNumEnd==null?"":periodNumEnd.Trim();
            var periodPercentBegin=$("input[name='PeriodPercentBegin']").val();
            periodPercentBegin=periodPercentBegin==null?"":periodPercentBegin.Trim();
            var periodPercentEnd=$("input[name='PeriodPercentEnd']").val();
            periodPercentEnd=periodPercentEnd==null?"":periodPercentEnd.Trim();
            location.href="../CustCredit/ExportExcel?SellOrg={0}&SellArea={1}&IntentNo={2}&SapFcusFid={3}&BuyName={4}&DebitorName={5}&CardId={6}&FinanceAgentorName={7}&SellType={8}&PaymentType={9}&FmanagerLevel={10}&PscontractNo={11}&SellName={12}&FmanagerName={13}&FirstPurchaseType={14}&PeriodNumBegin={15}&PeriodNumEnd={16}&PeriodPercentBegin={17}&PeriodPercentEnd={18}".Format(sellOrg,sellArea,intentNo,sapFcusFid,buyName,debitorName,cardId,financeAgentorName,sellType,paymentType,fmanagerLevel,pscontractNo,sellName,fmanagerName,firstPurchaseType,periodNumBegin,periodNumEnd,periodPercentBegin,periodPercentEnd);
            site_common.HideProgressBar();
          }
          </script>
        ]]>
      </Script>
    </Page>

    <Page name="RVWF" desc="垫付管理">
      <OperateControls>
        <OperateControl text="流水导入" authCode="AUTH_NT_EXCEEDIMP_APP_ADD" htmlAttr="onclick=&quot;javascript:parent.addTab('新增逾期流水导入','/SANY.DMS.Group.WebUIMVC4/Group/FinanceExceedImp/ExceedImpAddOrEdit',false,'新增逾期流水导入'); &quot;" />
        <OperateControl text="新增转还贷" authCode="AUTH_NT_RVWF_APP_ADD" htmlAttr="onclick=&quot;javascript:parent.addTab('新增转还贷申请','/SANY.DMS.Group.WebUIMVC4/Group/FinanceRVWF/RVWFAddOrEdit',false,'新增转还贷申请'); &quot;" />
        <OperateControl text="新增批量垫付" authCode="AUTH_NT_RVWF_BATCH_APP_ADD" htmlAttr="onclick=&quot;javascript:parent.addTab('新增批量垫付','/SANY.DMS.Group.WebUIMVC4/Group/FinanceRvwfBatch/RvwfBatchAdd',false,'新增批量垫付'); &quot;" />
        <OperateControl text="批量垫付" authCode="AUTH_NT_RVWF_BATCH_APP_QUERY" htmlAttr="onclick=&quot;javascript:parent.addTab('批量垫付','/SANY.DMS.Group.WebUIMVC4/Group/CommonQuery/QueryList?configName=QueryPage.config&amp;pageName=RvwfBatch',false,'批量垫付'); &quot;" />
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtRvwfAppDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="AppNo" controlType="text" desc="业务流水号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ContractNo" controlType="text" desc="融资合同号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="LenderName" controlType="text" desc="客户名称" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="WorkflowStatusName" name="WorkflowStatus" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetCommonCodeByTypeCode" param="WORKFLOW_STATUS_ID" desc="状态" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SupplierName" name="Supplier" controlType="select" getDataKey="GetSuppliers" desc="设备供应商" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SellersName" name="Sellers" controlType="select" getDataKey="GetSellers" param="AUTH_NT_CONTRACT_PURRTN_APP_ADD" desc="销售商" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ProvinceName" name="Province" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="PROV_CODE" desc="省份" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="PeriodBankName" name="PeriodBank" controlType="select" getDataKey="GetBanks" desc="放款银行" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="PeriodSubbankName" name="PeriodSubbank" controlType="select" desc="经办行" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="PeriodAcctNo" controlType="text" desc="还款账号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="CreateDate" controlType="date" htmlAttr="onfocus = &quot;WdatePicker({dateFmt:'yyyy-M'})&quot;" desc="垫付月份" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblRvwf" assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtRvwfAppDTO" queryUrl="../FinanceRVWF/GetPageList">
          <Fields key="AppId">AppNo,SourceTypeName,WorkflowStatusName,NodeName,SupplierName,SellersName,ProvinceName,PeriodBankName,PeriodSubbankName,LenderName,PeriodAcctNo,PlusAmt,ExceedNum,ContractNo,SubAmt,AckAmt</Fields>
          <OrderFields>AppNo,SourceTypeName,WorkflowStatusName,NodeName,SupplierName,SellersName,ProvinceName,PeriodBankName,PeriodSubbankName,LenderName,PeriodAcctNo,PlusAmt,ExceedNum,ContractNo,SubAmt,AckAmt</OrderFields>
          <Action>
            <View linkTitle="查看垫付申请" value="/SANY.DMS.Group.WebUIMVC4/Group/FinanceRVWF/RVWFView?appId={0}" authCode="AUTH_NT_RVWF_APP_VIEW" />
            <Edit linkTitle="修改垫付申请" value="/SANY.DMS.Group.WebUIMVC4/Group/FinanceRVWF/RVWFAddOrEdit?appId={0}" authCode="AUTH_NT_RVWF_APP_MODIFY" />
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
          $(function(){
            $("select[name='PeriodBank']").change(function(){
              $.ajax({
                url:"../FinanceBank/GetSubBanksByBankCode",
                type:"post",
                data:{bankCode:$(this).val()},
                success:function(result){
                  var arr = str2Json(result);
                  var periodSubbank=$("select[name='PeriodSubbank']");
                  periodSubbank.children("option").remove();
                  periodSubbank.append("<option value=''></option>");
                  for(var i=0;i<arr.length;i++){
                    periodSubbank.append("<option value='"+arr[i].SubbankCode+"'>"+arr[i].SubbankName+"</option>");
                  }
                }
              });
            });
          });
          
          function afterTableDataBind(){
            $("table[name='tblRvwf']").children("tbody").children("tr").each(function(){
              $(this).children("td:eq(12)").text(commafy($(this).children("td:eq(12)").text()));
              $(this).children("td:eq(15)").text(commafy($(this).children("td:eq(15)").text()));
              $(this).children("td:eq(16)").text(commafy($(this).children("td:eq(16)").text()));
            });
          }
          </script>
        ]]>
      </Script>
    </Page>
    <Page name="RvwfBatch" desc="批量垫付">
      <OperateControls>
        <OperateControl text="新增" authCode="AUTH_NT_RVWF_BATCH_APP_ADD" htmlAttr="onclick=&quot;javascript:parent.addTab('新增批量垫付','/SANY.DMS.Group.WebUIMVC4/Group/FinanceRvwfBatch/RvwfBatchAdd',false,'新增批量垫付'); &quot;" />
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtRvwfBatchAppDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="AppNo" controlType="text" desc="业务流水号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="BatchNo" controlType="text" desc="批次号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WorkflowStatusName" name="WorkflowStatus" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetCommonCodeByTypeCode" param="WORKFLOW_STATUS_ID" desc="状态" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblRvwfBatch" assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtRvwfBatchAppDTO" queryUrl="../FinanceRvwfBatch/GetPageList">
          <Fields key="AppId">AppNo,WorkflowStatusName,NodeName,BatchNo,Num,TotalExceedAmt,TotalSubAmt,TotalAckAmt,UpdateDate,SubmitPersonName,SubmitDate</Fields>
          <OrderFields> UpdateDate,AppNo,WorkflowStatusName,NodeName,BatchNo,Num,TotalExceedAmt,TotalSubAmt,TotalAckAmt,UpdateDate,SubmitPersonName,SubmitDate</OrderFields>
          <Action>
            <View linkTitle="查看批量垫付" value="/SANY.DMS.Group.WebUIMVC4/Group/FinanceRvwfBatch/RvwfBatchView?appId={0}" authCode="AUTH_NT_RVWF_BATCH_APP_VIEW" />
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
          function afterTableDataBind(){
            $("table[name='tblRvwfBatch']").children("tbody").children("tr").each(function(){
              $(this).children("td:eq(6)").text(commafy($(this).children("td:eq(6)").text()));
              $(this).children("td:eq(7)").text(commafy($(this).children("td:eq(7)").text()));
              $(this).children("td:eq(8)").text(commafy($(this).children("td:eq(8)").text()));
            });
          }
          </script>
        ]]>
      </Script>
    </Page>
    <Page name="ProductPlanReportList" desc="生产发运监控明细报表">
      <SearchControls assemblyName="SANY.DMS.Group.WebUIMVC4" typeName="SANY.DMS.Group.WebUIMVC4.Areas.Group.Models.ProductPlanModel" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="StationName" controlType="text" desc="站名" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ProductType" name="ProductType" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetStationType" param="WORKFLOW_STATUS_ID" desc="型号" />
          </Column>
          <Column>

          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblProductPlanReport" assemblyName="SANY.DMS.Group.WebUIMVC4" typeName="SANY.DMS.Group.WebUIMVC4.Areas.Group.Models.ProductPlanModel" queryUrl="../SalesStationConfirmInfo/GetProductPlanReport">
          <Fields key="ApplyId">StationName,ProductType,DespatchType,ZlName,PlzName,PpdName,XpdName,KzsName,SjName,FirstPlan,FirstActual,LastPlan,LastActual,DespatchCarNum,ComCarNum,ArriveCarNum</Fields>
          <OrderFields>StationName,ProductType,DespatchType,ZlName,PlzName,PpdName,XpdName,KzsName,SjName,FirstPlan,FirstActual,LastPlan,LastActual,DespatchCarNum,ComCarNum,ArriveCarNum</OrderFields>
        </Table>
      </Tables>
    </Page>
    <Page name="EXCEEDIMP" desc="逾期流水导入管理">
      <OperateControls>
        <OperateControl text="新增" authCode="AUTH_NT_EXCEEDIMP_APP_ADD" htmlAttr="onclick=&quot;javascript:parent.addTab('新增逾期流水导入','/SANY.DMS.Group.WebUIMVC4/Group/FinanceExceedImp/ExceedImpAddOrEdit',false,'新增逾期流水导入'); &quot;" />
        <OperateControl text="模板下载" authCode="AUTH_NT_EXCEEDIMP_APP_ADD" htmlAttr="onclick=&quot;javascript:void(0); &quot; href='/SANY.DMS.Group.WebUIMVC4/uploads/三一逾期流水导入模板.xls'" />
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtExceedimpAppDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="AppNo" name="AppNo" controlType="text" desc="业务流水号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WorkflowStatusName" name="WorkflowStatus" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetCommonCodeByTypeCode" param="WORKFLOW_STATUS_ID" desc="业务状态" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="AppDate" controlType="date" htmlAttr="onfocus = &quot;WdatePicker({dateFmt:'yyyy-M'})&quot;" desc="导入月份" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="PeriodBankName" name="PeriodBank" controlType="select" getDataKey="GetBanks" desc="放款银行" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="PeriodSubbankName" name="PeriodSubbank" controlType="select" desc="经办行" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="CreatorName" controlType="text" desc="创建人" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="CreateDate" name="StartDate" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="~" desc="提交时间开始" />
            <SearchControl propertyInfoName="CreateDate" name="EndDate" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" desc="提交时间结束" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblExceedImp" assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtExceedimpAppDTO" queryUrl="../FinanceExceedImp/GetPageList">
          <Fields key="AppId">AppNo,WorkflowStatusName,PeriodBankName,PeriodSubbankName,AppDate,Remark,CreatorName,CreateDate</Fields>
          <Action>
            <View linkTitle="查看逾期流水" value="/SANY.DMS.Group.WebUIMVC4/Group/FinanceExceedImp/ExceedImpView?appId={0}" authCode="AUTH_NT_EXCEEDIMP_APP_VIEW" />
          </Action>
        </Table>
      </Tables>
    </Page>
    <Page name="NtCusallotAppReportBmu" desc="事业部回款定表">
      <OperateControls>
        <OperateControl text="导出" authCode="AUTH_FUNC_FINANCE_MUN_EXPORT" htmlAttr="onclick='exportExcel();'" />
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtFinanceReportDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="AppNo" controlType="text" desc="业务流水号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RecvNo" controlType="text" desc="回款流水号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RecvDate" name="StartDate" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="-" />
            <SearchControl propertyInfoName="RecvDate" name="EndDate" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="SapNo" controlType="text" desc="SAP订单号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WarrantNo" controlType="text" desc="记账凭证号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="CusName" controlType="text" desc="客户名称" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WarrantTime" name="WarrantTime" controlType="date" htmlAttr="id='WarrantTime' onfocus = &quot;WdatePicker({dateFmt:'yyyy-MM'})&quot;" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="DutyOrgName" name="DutyOrg" controlType="select" getDataKey="GetSellers" param="AUTH_NT_CONTRACT_PURRTN_APP_ADD" desc="销售商" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RecvSourceName" name="RecvSource" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="RECV_SOURCE" desc="回款来源" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RecvWayName" name="RecvWay" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="RECV_WAY"  desc="回款方式" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="CusTypeName" name="CusRecvType" controlType="select" getDataKey="GetCusRecvWay" param="CUS_RECV_TYPE" desc="解款类型" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="RecordStatus" name="RecordStatus" controlType="select" getDataKey="GetRecordStatus" desc="记账状态" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblRvwf" assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtFinanceReportDTO" queryUrl="../FinanceReport/GetRecBmuPageList">
          <Fields key="AppId">AppNo,RecvNo,RecvDate,WarrantTime,DutyProvinceName,CusName,SapCusId,SubAmtStr,BillProductName,BillBizDate,SapNo,DtDs,InvoiceTypeName,CusTypeName,BillAckAmtStr,CusAcctName,RecvTypeName,RecvSourceName,RecvWayName,CusBankName,CountCusFlowNo,WarrantNo,BankCusFlowNo,DutyMan,RecvWarrantNo,Remark</Fields>
          <OrderFields>AppNo,RecvNo,RecvDate,DutyProvinceName,CusName,SapCusId,SapNo</OrderFields>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
          $(function(){
            $("#WarrantTime").val($("#hidCurrentYearAndMonth").val());
          });
          //导出Excel
          function exportExcel(){
            site_common.ShowProgressBar();
            
            var appNo=$("input[name='AppNo']").val();
            appNo=appNo==null?"":appNo.Trim();
            
            var recvNo=$("input[name='RecvNo']").val();
            recvNo=recvNo==null?"":recvNo.Trim();
            
             var startRecvDate=$("input[name='StartDate']").val();
            startRecvDate=startRecvDate==null?"":startRecvDate.Trim();
            
            var endRecvDate=$("input[name='EndDate']").val();
            endRecvDate=endRecvDate==null?"":endRecvDate.Trim();
            
            var dutyOrgName=$("select[name='DutyOrg']").val();
            dutyOrgName=dutyOrgName==null?"":dutyOrgName.Trim();
            
             var sapNo=$("input[name='SapNo']").val();
            sapNo=sapNo==null?"":sapNo.Trim();
            
            var warrantNo=$("input[name='WarrantNo']").val();
            warrantNo=warrantNo==null?"":warrantNo.Trim();
            
            var cusName=$("input[name='CusName']").val();
            cusName=cusName==null?"":cusName.Trim();
            
            var recvSource=$("select[name='RecvSource']").val();
            recvSource=recvSource==null?"":recvSource.Trim();
            
            var recvWay=$("select[name='RecvWay']").val();
            recvWay=recvWay==null?"":recvWay.Trim();
            
             var cusRecvType=$("select[name='CusRecvType']").val();
            cusRecvType=cusRecvType==null?"":cusRecvType.Trim();
            
             var WarrantTime=$("input[name='WarrantTime']").val();
            WarrantTime=WarrantTime==null?"":WarrantTime.Trim();
            
             var recordStatus=$("select[name='RecordStatus']").val();
            recordStatus=recordStatus==null?"":recordStatus.Trim();
            
            location.href="../FinanceReport/ExprotMun?AppNo={0}&RecvNo={1}&StartDate={2}&EndDate={3}&SapNo={4}&WarrantNo={5}&CusName={6}&DutyOrg={7}&RecvSource={8}&RecvWay={9}&WarrantTime={10}&CusRecvType={11}&RecordStatus={12}".Format(appNo,recvNo,startRecvDate,endRecvDate,sapNo,warrantNo,cusName,dutyOrgName,recvSource,recvWay,WarrantTime,cusRecvType,recordStatus);
            site_common.HideProgressBar();
          }
           </script>
           ]]>
      </Script>
    </Page>
    <Page name="NtCusallotAppReportEbank" desc="按揭网银回款定表">
      <OperateControls>
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtCusallotAppReportEbankDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="AppNo" controlType="text" desc="回款流水号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RecvDate" name="StartDate" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="-" />
            <SearchControl propertyInfoName="RecvDate" name="EndDate" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="BillNo" controlType="text" desc="按揭合同号" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="SapCusId" controlType="text" desc="客户码" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="LenderName" controlType="text" desc="借款人" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="CusAcctName" controlType="text" desc="付款人" />
          </Column>

        </Row>
        <Row>

          <Column>
            <SearchControl propertyInfoName="PeriodBankName" name="PeriodBank" controlType="select" getDataKey="GetBanks" desc="放款银行" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="PeriodSubbankName" name="PeriodSubbank" controlType="select" desc="经办行" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WarrantNo" controlType="text" desc="中发凭证号" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="OrgName" name="OrgName" controlType="select" getDataKey="GetSuppliers" desc="事业部" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblRvwf" assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtCusallotAppReportEbankDTO" queryUrl="../FinanceReport/GetRecEbankPageList">
          <Fields key="AppId">AppNo,RecordStatusName,DutyProvinceName,RecvDate,RecvAcctCode,WarrantNo,CusAcctName,RecvDesc,CusAcctCode,TotalRecvAmt,LenderName,SapCusId,OrgName,PeriodBankName,BillNo,RvwfSubAmt,RbackSubAmt,RserverSubAmt,RinsureSubAmt,RdepositSubAmt,RnotaSubAmt,RensureSubAmt,Others,AdjustState,RvwfWarrantNo</Fields>
          <OrderFields>AppNo,RecordStatusName,DutyProvinceName,RecvDate,RecvAcctCode,WarrantNo,CusAcctName</OrderFields>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
          $(function(){
            $("select[name='PeriodBank']").change(function(){
              $.ajax({
                url:"../FinanceBasic/GetSubBanksByBankCode",
                data:{bankCode:$(this).val()},
                success:function(result){
                  var arr = str2Json(result);
                  var periodSubbank=$("select[name='PeriodSubbank']");
                  periodSubbank.children("option").remove();
                  periodSubbank.append("<option value=''></option>");
                  for(var i=0;i<arr.length;i++){
                    periodSubbank.append("<option value='"+arr[i].SubbankCode+"'>"+arr[i].SubbankName+"</option>");
                  }
                }
              });
            });
          });
          //绑定数据后对已经发货评审过的数据禁用修改链接
          function afterTableDataBind(){
            $("table[name='tblRvwf']").children("tbody").children("tr").each(function(){
            $(this).children("td:eq(10)").html(commafy($(this).children("td:eq(10)").text()));
             $(this).children("td:eq(16)").html(commafy($(this).children("td:eq(16)").text()));
                $(this).children("td:eq(17)").html(commafy($(this).children("td:eq(17)").text()));
                $(this).children("td:eq(18)").html(commafy($(this).children("td:eq(18)").text()));
                $(this).children("td:eq(19)").html(commafy($(this).children("td:eq(19)").text()));
                $(this).children("td:eq(20)").html(commafy($(this).children("td:eq(20)").text()));
                $(this).children("td:eq(21)").html(commafy($(this).children("td:eq(21)").text()));
                $(this).children("td:eq(22)").html(commafy($(this).children("td:eq(22)").text()));
                $(this).children("td:eq(23)").html(commafy($(this).children("td:eq(23)").text()));
                $(this).children("td:eq(24)").html(commafy($(this).children("td:eq(24)").text()));
                $(this).children("td:eq(25)").html(commafy($(this).children("td:eq(25)").text()));
            });
          }
          </script>
        ]]>
      </Script>
    </Page>
    <Page name="NtCusallotAppReportRef" desc="按揭关联单位回款定表">
      <OperateControls>
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtCusallotAppReportEbankDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="AppNo" controlType="text" desc="回款流水号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RecvDate" name="StartDate" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="-" />
            <SearchControl propertyInfoName="RecvDate" name="EndDate" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="BillNo" controlType="text" desc="按揭合同号" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="SapCusId" controlType="text" desc="客户码" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="LenderName" controlType="text" desc="借款人" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="DutyProvinceName" name="Province" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="PROV_CODE" desc="省份" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="OrgName" name="OrgName" controlType="select" getDataKey="GetBanks" desc="事业部" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RecvSourceName" name="RecvSource" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="RECV_SOURCE" desc="货款来源" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SapNo"  name="SapNo"  controlType="text" desc="重工凭证号" />
          </Column>
        </Row>
        <Row>

        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblRvwf" assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtCusallotAppReportEbankDTO" queryUrl="../FinanceReport/GetRecRefPageList">
          <Fields key="AppId">AppNo,RecordStatusName,LenderName,SapCusId,OrgName,PeriodBankName,RecvWayName,CountWarrantNo,SapNo,RecvDesc,TotalRecvAmt,PeriodBankName,BillNo,RvwfSubAmt,RbackSubAmt,RserverSubAmt,RinsureSubAmt,RdepositSubAmt,RnotaSubAmt,RensureSubAmt,Others,AdjustState,RvwfWarrantNo</Fields>
          <OrderFields>AppNo,RecordStatusName,LenderName,SapCusId,OrgName,PeriodBankName,RecvWayName,CountWarrantNo,SapNo</OrderFields>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
          //绑定数据后对已经发货评审过的数据禁用修改链接
          function afterTableDataBind(){
            $("table[name='tblRvwf']").children("tbody").children("tr").each(function(){
                $(this).children("td:eq(11)").html(commafy($(this).children("td:eq(11)").text()));
                $(this).children("td:eq(14)").html(commafy($(this).children("td:eq(14)").text()));
                $(this).children("td:eq(15)").html(commafy($(this).children("td:eq(15)").text()));
                $(this).children("td:eq(16)").html(commafy($(this).children("td:eq(16)").text()));
                $(this).children("td:eq(17)").html(commafy($(this).children("td:eq(17)").text()));
                $(this).children("td:eq(18)").html(commafy($(this).children("td:eq(18)").text()));
                $(this).children("td:eq(19)").html(commafy($(this).children("td:eq(19)").text()));
                $(this).children("td:eq(20)").html(commafy($(this).children("td:eq(20)").text()));
                $(this).children("td:eq(21)").html(commafy($(this).children("td:eq(21)").text())); 
            });
          }
        </script>
        ]]>
      </Script>
    </Page>
    <Page name="NtCusallotAppReportRent" desc="租赁租金回款定表 ">
      <OperateControls>
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtCusallotAppReportRentDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="AppNo" controlType="text" desc="回款流水号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RecvDate" name="StartDate" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="-" />
            <SearchControl propertyInfoName="RecvDate" name="EndDate" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="BillNo" controlType="text" desc="融资合同号" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="SapCusId" controlType="text" desc="融资客户码" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="LenderName" controlType="text" desc="承租人" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="TotalRecvAmt" controlType="text" desc="实收租金" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="RecvSourceName" name="RecvSource" controlType="select" getDataKey="GetRecvSource" desc="回款来源" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RecvWayName" name="RecvWay" controlType="select" getDataKey="GetRecvWay" desc="回款方式" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WarrantNo"  name="WarrantNo"  controlType="text" desc="凭证编号" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="OrgName" name="OrgName" controlType="select" getDataKey="GetSuppliers" desc="事业部" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="TallyFlag"  name="TallyFlag"  controlType="text" desc="记账标志" />
          </Column>
          <Column>
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblRvRent" assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtCusallotAppReportRentDTO" queryUrl="../FinanceReport/GetRentPageList">
          <Fields key="AppId">AppNo,RecordStatusName,RecvDate,BillNo,SapCusId,LenderName,TotalRecvAmt,RecvDesc,RecvWayName,RecvSourceName,WarrantNo,OrgName,TallyFlag</Fields>
          <OrderFields>AppNo,RecordStatusName,RecvDate,BillNo,LenderName,TotalRecvAmt,RecvWayName,WarrantNo,SapCusId</OrderFields>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
          //绑定数据后对已经发货评审过的数据禁用修改链接
          function afterTableDataBind(){
            $("table[name='tblRvRent']").children("tbody").children("tr").each(function(){
                $(this).children("td:eq(7)").html(commafy($(this).children("td:eq(7)").text()));
            });
          }
        </script>
        ]]>
      </Script>
    </Page>
    <Page name="NtCusallotAppReportFees" desc="租赁费用回款定表 ">
      <OperateControls>
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtCusallotAppReportRentDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="AppNo" controlType="text" desc="回款流水号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RecvDate" name="StartDate" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="-" />
            <SearchControl propertyInfoName="RecvDate" name="EndDate" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="BillNo" controlType="text" desc="融资合同号" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="SapCusId" controlType="text" desc="融资客户码" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="LenderName" controlType="text" desc="承租人" />
          </Column>
          <Column>

          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="RecvSourceName" name="RecvSource" controlType="select" getDataKey="GetRecvSource" desc="回款来源" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RecvWayName" name="RecvWay" controlType="select" getDataKey="GetRecvWay" desc="回款方式" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WarrantNo"  name="WarrantNo"  controlType="text" desc="凭证编号" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="OrgName" name="OrgName" controlType="select" getDataKey="GetSuppliers" desc="事业部" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="TallyFlag"  name="TallyFlag"  controlType="text" desc="记账标志" />
          </Column>
          <Column>
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblRvRent" assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtCusallotAppReportRentDTO" queryUrl="../FinanceReport/GetFeesPageList">
          <Fields key="AppId">AppNo,RecordStatusName,RecvDate,TallyTime,RecvWayName,TotalRecvAmt,CusAcctName,BillNo,SapCusId,LenderName,OrgName,TallyFlag,RinsureSubAmt,RensureSubAmt,RserverSubAmt,RnotaSubAmt,RdepositSubAmt,FeesSum</Fields>
          <OrderFields>AppNo,RecordStatusName,RecvDate,BillNo,LenderName,TotalRecvAmt,TallyTime,CusAcctName,SapCusId</OrderFields>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
          //绑定数据后对已经发货评审过的数据禁用修改链接
          function afterTableDataBind(){
            $("table[name='tblRvRent']").children("tbody").children("tr").each(function(){
                $(this).children("td:eq(6)").html(commafy($(this).children("td:eq(6)").text()));
                $(this).children("td:eq(13)").html(commafy($(this).children("td:eq(13)").text()));
                $(this).children("td:eq(14)").html(commafy($(this).children("td:eq(14)").text()));
                $(this).children("td:eq(15)").html(commafy($(this).children("td:eq(15)").text()));
                $(this).children("td:eq(16)").html(commafy($(this).children("td:eq(16)").text()));
                $(this).children("td:eq(17)").html(commafy($(this).children("td:eq(17)").text()));
                $(this).children("td:eq(18)").html(commafy($(this).children("td:eq(18)").text()));
                $(this).children("td:eq(19)").html(commafy($(this).children("td:eq(19)").text()));
            });
          }
        </script>
        ]]>
      </Script>
    </Page>
    <Page name="JOURNALCHG" desc="调账管理">
      <OperateControls>
        <OperateControl text="新增调账" authCode="AUTH_NT_JOURNALCHG_APP_ADD" htmlAttr="onclick=&quot;javascript:parent.addTab('新增调账','/SANY.DMS.Group.WebUIMVC4/Group/FinanceJournalChg/JournalChgAdd',false,'新增调账'); &quot;" />
        <OperateControl text="坏账核销" authCode="AUTH_NT_WRITEOFF_APP_ADD" htmlAttr="onclick=&quot;javascript:parent.addTab('坏账核销','/SANY.DMS.Group.WebUIMVC4/Group/FinanceWriteOff/WriteOffAdd',false,'新增调账'); &quot;" />
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtJournalchgAppDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="BillNo" name="BillNo" controlType="text" desc="业务流水号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SrcAcctCode" name="SrcAcctCode" controlType="text" desc="账户代码" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SrcAcctName" name="SrcAcctName" controlType="text" desc="账户名称" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="SrcSubjectName" name="SrcSubjectName" controlType="text" desc="记账名称" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SrcSubjectCode" name="SrcSubjectCode" controlType="text" desc="记账科目" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="CreateDate" name="StartDate" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="~" desc="提交时间开始" />
            <SearchControl propertyInfoName="CreateDate" name="EndDate" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" desc="提交时间结束" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblJournalChg" assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.AfterLoan.NtAppDTO" queryUrl="../FinanceJournalChg/GetPageList">
          <Fields key="AppId">AppNo,RecordStatusName,AppTitle,Remark,CreatorName,CreateDate,SubmitDate</Fields>
          <OrderFields>UpdateDate</OrderFields>
          <Action>
            <View linkTitle="查看调账" value="/SANY.DMS.Group.WebUIMVC4/Group/FinanceJournalChg/JournalChgView?appId={0}" authCode="AUTH_NT_JOURNALCHG_APP_VIEW" />
            <Edit linkTitle="修改调账" value="/SANY.DMS.Group.WebUIMVC4/Group/FinanceJournalChg/JournalChgEdit?appId={0}" authCode="AUTH_NT_JOURNALCHG_APP_MODIFY" />
          </Action>
        </Table>
      </Tables>
    </Page>

    <Page name="NtAgentRecvAppReport" desc="代理商回款定表 ">
      <OperateControls>
        <OperateControl text="导出" authCode="AUTH_FUNC_FINANCE_AGENT_EXPORT" htmlAttr="onclick='exportExcel();'" />
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtAgentRecvAppDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="SellTypeName" name="SellType" controlType="select" getDataKey="GetSellType" desc="销售类型" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="AppNo" controlType="text" desc="回款流水号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RecvDate" name="StartRecvDate" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="-" />
            <SearchControl propertyInfoName="RecvDate" name="EndRecvDate" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="ProductName" name="Product" controlType="select" getDataKey="GetProduct" desc="产品" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SellName" controlType="text" desc="营销代表" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="CusName" controlType="text" desc="客户名称" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="DeliveryDate" name="StartDeliveryDate" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="-" />
            <SearchControl propertyInfoName="DeliveryDate" name="EndDeliveryDate" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="EquipmentID" controlType="text" desc="设备编码" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RecvWayName" name="RecvWay" controlType="select" getDataKey="GetRecvWay" desc="收款方式" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="RecvTypeName" name="RecvType" controlType="select" getDataKey="GetRecvType" desc="回款性质" />
          </Column>
          <Column>
          </Column>
          <Column>
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblAgentRecv" assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtAgentRecvAppDTO" queryUrl="../FinanceReport/GetAgentRecvPageList">
          <Fields key="AppId">AppNo,RecvDate,SellTypeName,DutyOrgName,ProductName,SellName,SellTel,SapCusId,CusName,DeliveryDate,EquipmentID,SapOrderNo,RecvWayName,XianJinRecv,YinChenRecv,RecvNo,RecvTypeName,AnJieRecv,KaiJiRecv</Fields>
          <OrderFields>AppNo,RecvDate,DeliveryDate</OrderFields>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
          //绑定数据后对已经发货评审过的数据禁用修改链接
          function afterTableDataBind(){
            $("table[name='tblAgentRecv']").children("tbody").children("tr").each(function(){
               var tempval=$(this).children("td:eq(2)").text();
                $(this).children("td:eq(2)").html(ReplaceDefaultDatEmpty(tempval.toString().substring(0, tempval.toString().indexOf(" "))));
                $(this).children("td:eq(14)").html(commafy($(this).children("td:eq(14)").text()));
                $(this).children("td:eq(15)").html(commafy($(this).children("td:eq(15)").text()));
                $(this).children("td:eq(18)").html(commafy($(this).children("td:eq(18)").text()));
                $(this).children("td:eq(19)").html(commafy($(this).children("td:eq(19)").text()));
            });
          }
          // 替换默认日期时间为空
         function ReplaceDefaultDatEmpty(dt) {
           var d = new Date(dt);
           return d.getFullYear() == 1900 ? "" : dt;
         }
         //导出Excel
          function exportExcel(){
            site_common.ShowProgressBar();
           var sellType=$("select[name='SellType']").val();
            sellType=sellType==null?"":sellType.Trim();
            
            var appNo=$("input[name='AppNo']").val();
            appNo=appNo==null?"":appNo.Trim();
            
             var startRecvDate=$("input[name='StartRecvDate']").val();
            startRecvDate=startRecvDate==null?"":startRecvDate.Trim();
            
            var endRecvDate=$("input[name='EndRecvDate']").val();
            endRecvDate=endRecvDate==null?"":endRecvDate.Trim();
            
            var productName=$("select[name='Product']").val();
            productName=productName==null?"":productName.Trim();
            
            var sellName=$("input[name='SellName']").val();
            sellName=sellName==null?"":sellName.Trim();
            
            var cusName=$("input[name='CusName']").val();
            cusName=cusName==null?"":cusName.Trim();
            
            var startDeliveryDate=$("input[name='StartDeliveryDate']").val();
            startDeliveryDate=startDeliveryDate==null?"":startDeliveryDate.Trim();
            
            var endDeliveryDate=$("input[name='EndDeliveryDate']").val();
            endDeliveryDate=endDeliveryDate==null?"":endDeliveryDate.Trim();
            
            var equipmentID=$("input[name='EquipmentID']").val();
            equipmentID=equipmentID==null?"":equipmentID.Trim();
            
            var recvWay=$("select[name='RecvWay']").val();
            recvWay=recvWay==null?"":recvWay.Trim();
            
            var recvType=$("select[name='RecvType']").val();
            recvType=recvType==null?"":recvType.Trim();
            
            location.href="../FinanceReport/ExportAgent?SellType={0}&AppNo={1}&StartDate={2}&EndDate={3}&Product={4}&SellName={5}&CusName={6}&StartDeliveryDate={7}&EndDeliveryDate={8}&EquipmentID={9}&RecvWay={10}&RecvType={11}".Format(sellType,appNo,startRecvDate,endRecvDate,productName,sellName,cusName,startDeliveryDate,endDeliveryDate,equipmentID,recvWay,recvType);
            site_common.HideProgressBar();
          }
          </script>
        ]]>
      </Script>
    </Page>
    <Page name="NtRollOverList" desc="展期管理列表">
      <OperateControls>
        <OperateControl text="新增" authCode="AUTH_NT_CONTRACT_ROLLOVER_APP_ADD" htmlAttr="onclick=&quot;javascript:parent.addTab('新增展期申请','/SANY.DMS.Group.WebUIMVC4/Group/FinanceRollover/RollOverDetailAddOrEdit',false,'新增展期申请'); &quot;" />
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.AfterLoan.NtContractRolloverAppDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="AppNo" controlType="text" desc="业务流水号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WorkflowStatusName" name="WorkflowStatus" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetCommonCodeByTypeCode" param="WORKFLOW_STATUS_ID" desc="状态" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ContractNo" controlType="text" desc="融资合同号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="LenderName" controlType="text" desc="客户名称" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="SupplierName" name="Supplier" controlType="select" getDataKey="GetSuppliers" desc="设备供应商" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SellersName" name="Sellers" controlType="select" getDataKey="GetSellers" param="AUTH_NT_CONTRACT_ROLLOVER_APP_ADD" desc="销售商" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ProvinceName" name="Province" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="PROV_CODE" desc="省份" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="FProductName" name="FProduct" controlType="select" getDataKey="GetFproductIDAndName" desc="融资产品" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="PeriodBankName" name="PeriodBank" controlType="select" getDataKey="GetBanks" desc="放款银行" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="PeriodSubbankName" name="PeriodSubbank" controlType="select" desc="经办行" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="CreatorName" controlType="text" desc="申请人" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="CreateDate" name="StartCreateDate" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="-" />
            <SearchControl propertyInfoName="CreateDate" name="EndCreateDate" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblRollOverApp" assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.AfterLoan.NtContractRolloverAppDTO" queryUrl="../FinanceRollover/GetRollOverPageList">
          <Fields key="AppId">AppNo,WorkflowStatusName,NodeName,SupplierName,SellersName,FProductName,ProvinceName,PeriodBankName,PeriodSubbankName,LenderName,PeriodAcctNo,PeriodNum,NewPeriodNum,NewSumInterest,ContractNo</Fields>
          <OrderFields></OrderFields>
          <Action>
            <View linkTitle="查看展期申请" value="/SANY.DMS.Group.WebUIMVC4/Group/FinanceRollover/RollOverDetailAddOrEdit?appId={0}&amp;type=View" authCode="AUTH_NT_CONTRACT_ROLLOVER_APP_VIEW" />
            <Edit linkTitle="修改展期申请" value="/SANY.DMS.Group.WebUIMVC4/Group/FinanceRollover/RollOverDetailAddOrEdit?appId={0}&amp;type=Update" authCode="AUTH_NT_CONTRACT_ROLLOVER_APP_MODIFY" />
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
          $(function(){
            $("select[name='PeriodBank']").change(function(){
              $.ajax({
                url:"../FinanceBasic/GetSubBanksByBankCode",
                data:{bankCode:$(this).val()},
                success:function(result){
                  var arr = str2Json(result);
                  var periodSubbank=$("select[name='PeriodSubbank']");
                  periodSubbank.children("option").remove();
                  periodSubbank.append("<option value=''></option>");
                  for(var i=0;i<arr.length;i++){
                    periodSubbank.append("<option value='"+arr[i].SubbankCode+"'>"+arr[i].SubbankName+"</option>");
                  }
                }
              });
            });
          });
          </script>
        ]]>
      </Script>
    </Page>

    <Page name="LoanFeeBookList" desc="按揭费用台账列表">
      <OperateControls>
        <OperateControl text="导出" authCode="AUTH_FUNC_SALES_APPRAISE_MANAGER_IMPORT" htmlAttr="onclick='exportExcel();'" />
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Report.NtOutmoneyFinanceRptDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="FeeContractNo" controlType="text" desc="贷款合同号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SellTypeName" name="SellType" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="SELL_TYPE" desc="销售类型" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ReportMonth" controlType="text" desc="报表月份" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ContractStatusName" name="ContractStatus" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="SELL_TYPE" desc="合同状态" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="SupplierName" name="Supplier" controlType="select" getDataKey="GetSuppliers" desc="设备供应商" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="DutyOrgName" name="DutyOrg" controlType="select" getDataKey="GetSellers" param="AUTH_NT_CONTRACT_PURRTN_APP_ADD" desc="销售商" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="DutyProvinceName" name="Province" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="PROV_CODE" desc="省份" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="LoanRegion" name="LoanRegion" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="PROV_CODE" desc="融资区域" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="BuyName" controlType="text" desc="买受人" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="SellName" controlType="text" desc="营销代表" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="FmanagerName" controlType="text" desc="融资经理" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="PeriodSubbankName" name="PeriodSubbank" controlType="select" desc="经办行" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ReleaseDate" name="StartDate" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="-" desc="放款日期"/>
            <SearchControl propertyInfoName="ReleaseDate" name="EndDate" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" desc="放款日期"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="PeriodNum" name="PeriodNumBegin" controlType="text" htmlAttr="style='width:55px;'" unionText="~" desc="融资期数" />
            <SearchControl propertyInfoName="PeriodNum" name="PeriodNumEnd" controlType="text" htmlAttr="style='width:55px;'" desc="融资期数" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="LenderName" controlType="text" desc="承租人" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SapFcusFid" controlType="text" desc="融资客户码" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="PeriodPercent" name="PeriodPercentBegin" controlType="text" htmlAttr="style='width:55px;'" unionText="~" desc="融资比率" />
            <SearchControl propertyInfoName="PeriodPercent" name="PeriodPercentEnd" controlType="text" htmlAttr="style='width:55px;'" desc="融资比率" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="LoanBalance" name="LoanBalanceNumBegin" controlType="text" htmlAttr="style='width:55px;'" unionText="~" desc="贷款余额" />
            <SearchControl propertyInfoName="LoanBalance" name="LoanBalanceNumEnd" controlType="text" htmlAttr="style='width:55px;'" desc="贷款余额" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="OverdueNum" name="OverdueNumBegin" controlType="text" htmlAttr="style='width:55px;'" unionText="~" desc="逾期期数" />
            <SearchControl propertyInfoName="OverdueNum" name="OverdueNumEnd" controlType="text" htmlAttr="style='width:55px;'" desc="逾期期数" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblLoanFeeBookList" desc="按揭费用台账列表" assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Report.NtOutmoneyFinanceRptDTO" queryUrl="../FinanceBasic/GetLoanFeeBookList?ConsignmentType=0" isAllowEdit="false">
          <Fields key="ContractId,BillMonth">ServerCode,OrgName,ProvinceName,PeriodRegion,FmanagerName,SalerName,FinanceCustomerCode,LenderName,BuyerName,ContractNo,PeriodPercent,PeriodNum,ProductTypeName,ContractAmt,PayablePlanpay,RecvPlanpay,PeriodMoneyDate,PeriodBankName,PayableAmtGl,PayableAmtBx,PayableAmtGz,PayableAmtBz,PayableTotal,ChgRemark,MonthChgAmtGl,MonthChgAmtBx,MonthChgAmtGz,MonthChgAmtBz,MonthChgTotal,RecvAmtGl,RecvAmtBx,RecvAmtGz,RecvAmtBz,RecvAmtTotal,DebtTotal,MonthRecvAmt,MonthRecvPlanpayAmt,MonthRecvAmtGL,MonthRecvAmtBX,MonthRecvAmtGZ,MonthRecvAmtBZ,MonthRecvAmt,RecvFeeTotal,NoEnoughReason,ContractStatus</Fields>
          <OrderFields>ServerCode,OrgName,ProvinceName,PeriodRegion,FmanagerName,SalerName,FinanceCustomerCode,LenderName,BuyerName,ContractNo,PeriodPercent,PeriodNum,ProductTypeName,ContractAmt,PayablePlanpay,RecvPlanpay,PeriodMoneyDate,PeriodBankName,PayableAmtGl,PayableAmtBx,PayableAmtGz,PayableAmtBz,PayableTotal,ChgRemark,MonthChgAmtGl,MonthChgAmtBx,MonthChgAmtGz,MonthChgAmtBz,MonthChgTotal,RecvAmtGl,RecvAmtBx,RecvAmtGz,RecvAmtBz,RecvAmtTotal,DebtTotal,MonthRecvAmt,MonthRecvPlanpayAmt,MonthRecvAmtGL,MonthRecvAmtBX,MonthRecvAmtGZ,MonthRecvAmtBZ,MonthRecvAmt,RecvFeeTotal,NoEnoughReason,ContractStatus</OrderFields>
          <HiddenFields>ContractId,BillMonth</HiddenFields>
          <Action>
            <View linkTitle="查看按揭费用台账" value="/SANY.DMS.Group.WebUIMVC4/Group/FinanceBasic/CustomerMortgageInfoList?ContractId={0}&amp;Month={1}" authCode="LOAN_FEE_BOOK_LIST_SEARCH" />
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
          //导出Excel
          function exportExcel(){
            site_common.ShowProgressBar();
            var LoanContractNo=$("input[name='LoanContractNo']").val();
            LoanContractNo=LoanContractNo==null?"":LoanContractNo.Trim();
            
            var SellType=$("select[name='SellType']").val();
            SellType=SellType==null?"":SellType.Trim();
            
            var ReportMonth=$("input[name='ReportMonth']").val();
            ReportMonth=ReportMonth==null?"":ReportMonth.Trim();
            
            var ContractStatus=$("select[name='ContractStatus']").val();
            ContractStatus=ContractStatus==null?"":ContractStatus.Trim();
            
            var Supplier=$("select[name='Supplier']").val();
            Supplier=Supplier==null?"":Supplier.Trim();
            
            var DutyOrg=$("select[name='DutyOrg']").val();
            DutyOrg=DutyOrg==null?"":DutyOrg.Trim();
            
            var Province=$("select[name='Province']").val();
            Province=Province==null?"":Province.Trim();
            
            var LoanRegion=$("select[name='LoanRegion']").val();
            LoanRegion=LoanRegion==null?"":LoanRegion.Trim();
            
            var SellName=$("input[name='SellName']").val();
            SellName=SellName==null?"":SellName.Trim();
            
            var FmanagerName=$("input[name='FmanagerName']").val();
            FmanagerName=FmanagerName==null?"":FmanagerName.Trim();
            
            var PeriodSubbank=$("select[name='PeriodSubbank']").val();
            PeriodSubbank=PeriodSubbank==null?"":PeriodSubbank.Trim();
            
            var StartDate=$("input[name='StartDate']").val();
            StartDate=StartDate==null?"":StartDate.Trim();
            
            var EndDate=$("input[name='EndDate']").val();
            EndDate=EndDate==null?"":EndDate.Trim();
            
            var LenderName=$("input[name='LenderName']").val();
            LenderName=LenderName==null?"":LenderName.Trim();
            
            var SapFcusFid=$("input[name='SapFcusFid']").val();
            SapFcusFid=SapFcusFid==null?"":SapFcusFid.Trim();
            
            var PeriodPercentBegin=$("input[name='PeriodPercentBegin']").val();
            PeriodPercentBegin=PeriodPercentBegin==null?"":PeriodPercentBegin.Trim();
            
            var PeriodPercentEnd=$("input[name='PeriodPercentEnd']").val();
            PeriodPercentEnd=PeriodPercentEnd==null?"":PeriodPercentEnd.Trim();
            
            var LoanBalanceNumBegin=$("input[name='LoanBalanceNumBegin']").val();
            LoanBalanceNumBegin=LoanBalanceNumBegin==null?"":LoanBalanceNumBegin.Trim();
            
            var LoanBalanceNumEnd=$("input[name='LoanBalanceNumEnd']").val();
            LoanBalanceNumEnd=LoanBalanceNumEnd==null?"":LoanBalanceNumEnd.Trim();
            
            var BuyName=$("input[name='BuyName']").val();
            BuyName=BuyName==null?"":BuyName.Trim();
            
            var PeriodNumBegin=$("input[name='PeriodNumBegin']").val();
            PeriodNumBegin=PeriodNumBegin==null?"":PeriodNumBegin.Trim();
            
            var PeriodNumEnd=$("input[name='PeriodNumEnd']").val();
            PeriodNumEnd=PeriodNumEnd==null?"":PeriodNumEnd.Trim();
            
            var OverdueNumBegin=$("input[name='OverdueNumBegin']").val();
            OverdueNumBegin=OverdueNumBegin==null?"":OverdueNumBegin.Trim();
            
            var OverdueNumEnd=$("input[name='OverdueNumEnd']").val();
            OverdueNumEnd=OverdueNumEnd==null?"":OverdueNumEnd.Trim();
            
            location.href="../FinanceBasic/ExportExcel?LoanContractNo={0}&SellType={1}&ReportMonth={2}&ContractStatus={3}&Supplier={4}&DutyOrg={5}&Province={6}&LoanRegion={7}&SellName={8}&FmanagerName={9}&PeriodSubbank={10}&StartDate={11}&EndDate={12}&LenderName={13}&SapFcusFid={14}&PeriodPercentBegin={15}&PeriodPercentEnd={16}&LoanBalanceNumBegin={17}&LoanBalanceNumEnd={18}&BuyName={19}&PeriodNumBegin={20}&PeriodNumEnd={21}&OverdueNumBegin={22}&OverdueNumEnd={23}".Format(LoanContractNo,SellType,ReportMonth,ContractStatus,Supplier,DutyOrg,Province,LoanRegion,SellName,FmanagerName,PeriodSubbank,StartDate,EndDate,LenderName,SapFcusFid,PeriodPercentBegin,PeriodPercentEnd,LoanBalanceNumBegin,LoanBalanceNumEnd,BuyName,PeriodNumBegin,PeriodNumEnd,OverdueNumBegin,OverdueNumEnd);
            site_common.HideProgressBar();
          }
          </script>
        ]]>
      </Script>
    </Page>

    <Page name="EquipmentLedger" desc="二手机/法制机台账">
      <OperateControls>
        <OperateControl text="发布" authCode="AUTH_COMPANY_USED_MACHINE_RELEASE,AUTH_AGENTS_USED_MACHINE_RELEASE,AUTH_LEDGER_USED_MACHINE_RELEASE" htmlAttr="id='btnRelease'" />
        <OperateControl text="导出" authCode="AUTH_COMPANY_USED_MACHINE_IMPORT,AUTH_AGENTS_USED_MACHINE_IMPORT,AUTH_LEDGER_MACHINE_IMPORT" htmlAttr="id='btnImport' onclick='exportExcel();'" />
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.UsedLedgerMachine.BizModel" typeName="SANY.DMS.Group.UsedLedgerMachine.BizModel.UsedLedgerMachineSubjectInfoDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="UlmsiNo"  controlType="text" desc="单号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="AgentsName" name="Agents" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetSellers" param="AUTH_AGENTS_USED_MACHINE_VIEW,AUTH_LEDGER_MACHINE_VIEW" desc="代理商" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="EquipmentTypeName" name="EquipmentType" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetCommonCodeByTypeCode" param="EQUIPMENT_TYPE" desc="设备类型" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ProductTypeName" name="ProductType" controlType="select" getDataKey="GetListGroupByProductType" desc="产品类型" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="Brand"  controlType="text" desc="品牌" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="Chassis"  controlType="text" desc="底盘" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ModelNo"  controlType="text" desc="型号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="MeterNumber"  controlType="text" desc="米数" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="ProductionYearMonth"  controlType="text" desc="生产年月" htmlAttr=" class = 'Wdate' onfocus = &quot;WdatePicker({dateFmt:'yyyy',realDateFmt:'yyyy'})&quot; " />
          </Column>
          <Column>
            <SearchControl propertyInfoName="IsCompleteWarrant" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="YES_OR_NO" desc="权证是否齐全" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ProcessModeName" name="ProcessMode" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="TREATMENT" desc="处理方式" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WorkflowStatusName" name="WorkflowStatus" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetCommonCodeByTypeCode" param="WORKFLOW_STATUS_ID" desc="工作流状态" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="EquipmentNo"  controlType="text" desc="设备编号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="CarFrameNo"  controlType="text" desc="完整车架号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RecordStatusName" name="RecordStatus" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetCommonCodeByTypeCode" param="TREATMENT" desc="记录状态" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="IsHasOwnership" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="YES_OR_NO" desc="是否已取得所有权" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblMachine" desc="二手及法制机" assemblyName="SANY.DMS.Group.UsedLedgerMachine.BizModel" typeName="SANY.DMS.Group.UsedLedgerMachine.BizModel.UsedLedgerMachineSubjectInfoDTO" queryUrl="../UsedLedgerMachine/GetEquipmentLedgerPageData?queryType=equipmentLedger" isSingleSelect="true" rowClick="rowCilck(this);">
          <Fields key="UlmsiId">UlmsiNo,EquipmentTypeName,RecordStatusName,WorkflowStatusName,AgentsName,Contactor,ContactTel,OriginalCustomer,Brand,ProductTypeName,Chassis,ModelNo,MeterNumber,ProductionYearMonth,EquipmentNo,CarFrameNo,License,FactoryDate,IsCompleteWarrant,MissingWarrant,IsHasOwnership,EquipmentLocation,EquipmentStatus,OriginalValue1,ProcessModeName,Customer,ProcessMoney1,ProcessDate</Fields>
          <OrderFields>UlmsiNo,EquipmentTypeName,RecordStatusName,WorkflowStatusName,AgentsName,Contactor,ContactTel,OriginalCustomer,Brand,ProductTypeName,Chassis,ModelNo,MeterNumber,ProductionYearMonth,EquipmentNo,CarFrameNo,License,FactoryDate,IsCompleteWarrant,MissingWarrant,IsHasOwnership,EquipmentLocation,EquipmentStatus,OriginalValue,ProcessModeName,Customer,ProcessMoney,ProcessDate</OrderFields>
          <HiddenFields>UlmsiId</HiddenFields>
          <Action>
            <View linkTitle="查看" value="/SANY.DMS.Group.WebUIMVC4/Group/UsedLedgerMachine/UsedMachineView?id={0}" authCode="AUTH_COMPANY_USED_MACHINE_VIEW,AUTH_AGENTS_USED_MACHINE_VIEW,AUTH_LEDGER_MACHINE_VIEW" />
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
            $(function(){              
              $("#btnRelease").click(function(){
                var id="";
                var selectRow=getSelectRow();
                if(selectRow!=null){
                  id=selectRow.find("input:checked").next("input:hidden").val();
                }
                if(id==""){
                  alert("请选中项！");
                }else{
                  if(confirm("确认申请发布？")){
                    $.ajax({
                      url:"../UsedLedgerMachine/ProcessEquipment?id="+id+"&type="+0+"&rdm="+Math.random(),
                      dataType:"json",
                      success:function(result){
                        alert(result.info);
                      }
                    });
                  }
                }
              });
            });
            function rowCilck(obj){
              $(obj).find(":radio").attr("checked", "checked");
            }
            function getSelectRow(){
              var selectRow=null;
              $("table[name='tblMachine']").children("tbody").children("tr").each(function(){
                if($(this).find("input:checked").length>0){
                  selectRow=$(this);
                  return;
                }
              });
              return selectRow;
            }
            //导出Excel
            function exportExcel(){
              site_common.ShowProgressBar();              
              location.href="../UsedLedgerMachine/DataExport?queryType=equipmentLedger&"+$("form[name='fmSearch']").serialize();
              site_common.HideProgressBar();
            }
          </script>
        ]]>
      </Script>
    </Page>

    <Page name="ReleasePlatform" desc="发布平台">
      <OperateControls>
        <OperateControl text="导出" authCode="AUTH_COMPANY_USED_MACHINE_IMPORT,AUTH_AGENTS_USED_MACHINE_IMPORT,AUTH_LEDGER_MACHINE_IMPORT" htmlAttr="id='btnImport' onclick='exportExcel();'" />
        <OperateControl text="创建意向" htmlAttr="id='btnCreateIntent'" />
        <OperateControl text="撤销意向" htmlAttr="id='btnCancelIntent'" />
        <OperateControl text="撤销发布" htmlAttr="id='btnCancelRelease'" />
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.UsedLedgerMachine.BizModel" typeName="SANY.DMS.Group.UsedLedgerMachine.BizModel.UsedLedgerMachineSubjectInfoDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="UlmsiNo"  controlType="text" desc="单号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="AgentsName" name="Agents" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetAllSellers" desc="代理商" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="EquipmentTypeName" name="EquipmentType" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="EQUIPMENT_TYPE" desc="设备类型" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ProductTypeName" name="ProductType" controlType="select" getDataKey="GetListGroupByProductType" desc="产品类型" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="Brand"  controlType="text" desc="品牌" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="EquipmentNo"  controlType="text" desc="设备编号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="MeterNumber"  controlType="text" desc="米数" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ProductionYearMonth"  controlType="text" desc="生产年月" htmlAttr=" class = 'Wdate' onfocus = &quot;WdatePicker({dateFmt:'yyyy',realDateFmt:'yyyy'})&quot; " />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="IsCompleteWarrant" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="YES_OR_NO" desc="权证是否齐全" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SalesIntentPrice1" controlType="text" desc="销售意向价格" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="LeaseIntentPrice1" controlType="text" desc="租赁意向价格" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WorkflowStatusName" name="WorkflowStatus" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetCommonCodeByTypeCode" param="WORKFLOW_STATUS_ID" desc="工作流状态" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="CarFrameNo"  controlType="text" desc="完整车架号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RecordStatusName" name="RecordStatus" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetCommonCodeByTypeCode" param="TREATMENT" desc="记录状态" />
          </Column>
          <Column htmlAttr="colspan='3'">
            <SearchControl propertyInfoName="IsHasOwnership" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="YES_OR_NO" desc="是否已取得所有权" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblReleaseMachine" desc="发布设备" assemblyName="SANY.DMS.Group.UsedLedgerMachine.BizModel" typeName="SANY.DMS.Group.UsedLedgerMachine.BizModel.UsedLedgerMachineSubjectInfoDTO" queryUrl="../UsedLedgerMachine/GetEquipmentLedgerPageData?queryType=releasePlatform" isSingleSelect="true" rowClick="rowCilck(this);">
          <Fields key="UlmsiId">UlmsiNo,EquipmentTypeName,RecordStatusName,WorkflowStatusName,AgentsName,Brand,ProductTypeName,OriginalValue1,BuyTime,SalesIntentPrice1,LeaseIntentPrice1,EquipmentNo,CarFrameNo,Chassis,MeterNumber,ProductionYearMonth,ModelNo,IsCompleteWarrant,IsHasOwnership,AlreadySteerMileage1,AlreadyUseCube1,Amount,Contactor,ContactTel</Fields>
          <OrderFields>UlmsiNo,EquipmentTypeName,RecordStatusName,WorkflowStatusName,AgentsName,Brand,ProductTypeName,OriginalValue1,BuyTime,SalesIntentPrice1,LeaseIntentPrice1,EquipmentNo,CarFrameNo,Chassis,MeterNumber,ProductionYearMonth,ModelNo,IsCompleteWarrant,IsHasOwnership,AlreadySteerMileage,AlreadyUseCube,Amount,Contactor,ContactTel</OrderFields>
          <HiddenFields>UlmsiId</HiddenFields>
          <Action>
            <View linkTitle="查看" value="/SANY.DMS.Group.WebUIMVC4/Group/UsedLedgerMachine/UsedMachineView?id={0}" authCode="AUTH_COMPANY_USED_MACHINE_VIEW,AUTH_AGENTS_USED_MACHINE_VIEW,AUTH_LEDGER_MACHINE_VIEW" />
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
            $(function(){
              $("#btnCreateIntent").attr("disabled","disabled");
              $("#btnCancelIntent").attr("disabled","disabled");
              $("#btnCancelRelease").attr("disabled","disabled");
              
              $("#btnCreateIntent").click(function(){
                var id="";
                var selectRow=getSelectRow();
                if(selectRow!=null){
                  id=selectRow.find("input:checked").next("input:hidden").val();
                }
                if(id==""){
                  alert("请选中项！");
                }else{
                  if(confirm("确认创建意向？")){
                    $.ajax({
                      url:"../UsedLedgerMachine/ProcessEquipment?id="+id+"&type="+2,
                      dataType:"json",
                      success:function(result){
                        if(result.info=="创建意向成功"){
                          selectRow.children("td:eq(2)").html("创建意向");
                        }
                        alert(result.info);
                      },
                      error:function(a,b){
                        alert(a+"\t"+b);
                      }
                    });
                  }
                }
              });
              
              $("#btnCancelIntent").click(function(){
                var id="";
                var selectRow=getSelectRow();
                if(selectRow!=null){
                  id=selectRow.find("input:checked").next("input:hidden").val();
                }
                if(id==""){
                  alert("请选中项！");
                }else{
                  if(confirm("确认撤销意向？")){
                    $.ajax({
                      url:"../UsedLedgerMachine/ProcessEquipment?id="+id+"&type="+3,
                      dataType:"json",
                      success:function(result){
                        if(result.info=="撤销意向成功"){
                          selectRow.children("td:eq(2)").html("撤销意向");
                        }
                        alert(result.info);
                      },
                      error:function(a,b){
                        alert(a+"\t"+b);
                      }
                    });
                  }
                }
              });
              
              $("#btnCancelRelease").click(function(){
                var id="";
                var selectRow=getSelectRow();
                if(selectRow!=null){
                  id=selectRow.find("input:checked").next("input:hidden").val();
                }
                if(id==""){
                  alert("请选中项！");
                }else{
                  if(confirm("确认撤销发布？")){
                    $.ajax({
                      url:"../UsedLedgerMachine/ProcessEquipment?id="+id+"&type="+1,
                      dataType:"json",
                      success:function(result){
                        if(result.info=="撤销发布成功"){
                          selectRow.children("td:eq(2)").html("撤销发布");
                        }
                        alert(result.info);
                        tblReleaseMachineList.Search(this);
                      },
                      error:function(a,b){
                        alert(a+"\t"+b);
                      }
                    });
                  }
                }
              });
            });
            function rowCilck(obj){
              $(obj).find(":radio").attr("checked", "checked");
              $("#btnCreateIntent").removeAttr("disabled");
              $("#btnCancelIntent").removeAttr("disabled");
              $("#btnCancelRelease").removeAttr("disabled");
            }
            function getSelectRow(){
              var selectRow=null;
              $("table[name='tblReleaseMachine']").children("tbody").children("tr").each(function(){
                if($(this).find("input:checked").length>0){
                  selectRow=$(this);
                  return;
                }
              });
              return selectRow;
            }
            
            //导出Excel
            function exportExcel(){
              site_common.ShowProgressBar();             
              location.href="../UsedLedgerMachine/DataExport?queryType=releasePlatform&"+$("form[name='fmSearch']").serialize();
              site_common.HideProgressBar();
            }
          </script>
        ]]>
      </Script>
    </Page>

    <Page name="EquipmentList" desc="二手机/法制机列表">
      <SearchControls assemblyName="SANY.DMS.Group.UsedLedgerMachine.BizModel" typeName="SANY.DMS.Group.UsedLedgerMachine.BizModel.UsedLedgerMachineSubjectInfoDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="UlmsiNo"  controlType="text" desc="单号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="EquipmentTypeName" name="EquipmentType" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetCommonCodeByTypeCode" param="EQUIPMENT_TYPE" desc="设备类型" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ProductTypeName" name="ProductType" controlType="select" getDataKey="GetListGroupByProductType" desc="产品类型" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="Brand"  controlType="text" desc="品牌" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="Chassis"  controlType="text" desc="底盘" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ModelNo"  controlType="text" desc="型号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="MeterNumber"  controlType="text" desc="米数" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ProductionYearMonth"  controlType="text" desc="生产年月" htmlAttr=" class = 'Wdate' onfocus = &quot;WdatePicker({dateFmt:'yyyy',realDateFmt:'yyyy'})&quot; " />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="IsCompleteWarrant" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="YES_OR_NO" desc="权证是否齐全" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ProcessModeName" name="ProcessMode" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="TREATMENT" desc="处理方式" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WorkflowStatusName" name="WorkflowStatus" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetCommonCodeByTypeCode" param="WORKFLOW_STATUS_ID" desc="工作流状态" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="EquipmentNo"  controlType="text" desc="设备编号" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="CarFrameNo"  controlType="text" desc="完整车架号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RecordStatusName" name="RecordStatus" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetCommonCodeByTypeCode" param="TREATMENT" desc="记录状态" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="AgentsName" name="Agents" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetAllSellers" desc="代理商" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="IsHasOwnership" controlType="select" getDataKey="GetCommonCodeByTypeCode" param="YES_OR_NO" desc="是否已取得所有权" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblMachine" desc="二手及法制机" assemblyName="SANY.DMS.Group.UsedLedgerMachine.BizModel" typeName="SANY.DMS.Group.UsedLedgerMachine.BizModel.UsedLedgerMachineSubjectInfoDTO" queryUrl="../UsedLedgerMachine/GetEquipmentLedgerPageData?queryType=equipmentList" isAllowEdit="true">
          <Fields key="UlmsiId">UlmsiNo,EquipmentTypeName,RecordStatusName,WorkflowStatusName,AgentsName,Contactor,ContactTel,OriginalCustomer,Brand,ProductTypeName,Chassis,ModelNo,MeterNumber,ProductionYearMonth,EquipmentNo,CarFrameNo,License,FactoryDate,IsCompleteWarrant,MissingWarrant,IsHasOwnership,EquipmentLocation,EquipmentStatus,OriginalValue1,ProcessModeName,Customer,ProcessMoney1,ProcessDate</Fields>
          <OrderFields>UlmsiNo,EquipmentTypeName,RecordStatusName,WorkflowStatusName,AgentsName,Contactor,ContactTel,OriginalCustomer,Brand,ProductTypeName,Chassis,ModelNo,MeterNumber,ProductionYearMonth,EquipmentNo,CarFrameNo,License,FactoryDate,IsCompleteWarrant,MissingWarrant,IsHasOwnership,EquipmentLocation,EquipmentStatus,OriginalValue,ProcessModeName,Customer,ProcessMoney,ProcessDate</OrderFields>
          <HiddenFields>UlmsiId</HiddenFields>
          <Action>
            <View linkTitle="查看" value="/SANY.DMS.Group.WebUIMVC4/Group/UsedLedgerMachine/UsedMachineView?id={0}" authCode="AUTH_COMPANY_USED_MACHINE_VIEW,AUTH_AGENTS_USED_MACHINE_VIEW" />
            <Edit linkTitle="修改" value="/SANY.DMS.Group.WebUIMVC4/Group/UsedLedgerMachine/UsedMachineAddOrEdit?id={0}" authCode="AUTH_COMPANY_USED_MACHINE_MODIFY,AUTH_AGENTS_USED_MACHINE_MODIFY" />
          </Action>
        </Table>
      </Tables>
    </Page>

    <Page name="SalesSellorderInfo" desc="销售订单管理">
      <OperateControls>
        <OperateControl text="新增"  htmlAttr="onclick=&quot;javascript:parent.addTab('新增销售订单','/SANY.DMS.Group.WebUIMVC4/Group/SalesSellorderInfo/SalesSellorderInfo?czlx=1&amp;noSource=1',false,'新增销售订单'); &quot;" />
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.Sales.BizModel" typeName="SANY.DMS.Group.Sales.BizModel.CustomerManage.SalesSellorderInfoDTO">
        <Row>
          <Column>
            <!--<SearchControl propertyInfoName="OrderTypeId" controlType="text" desc="订单类型" />-->
            <SearchControl propertyInfoName="OrderTypeId" controlType="select" getDataKey="GetOrderType" desc="订单类型" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="OrderNo" controlType="text" desc="单据编号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SellReach1" controlType="text" desc="售达方" />
          </Column>
        </Row>

        <Row>
          <Column>
            <SearchControl propertyInfoName="AgentId1" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetOrgsByCurrUser" desc="代理商" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SellName" controlType="text" desc="销售代表" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SapOrderNo1" controlType="text" desc="SAP订单号" />
          </Column>
        </Row>

      </SearchControls>
      <Tables>
        <Table name="tblSalesSellorderInfo" assemblyName="SANY.DMS.Group.Sales.BizModel" typeName="SANY.DMS.Group.Sales.BizModel.CustomerManage.SalesSellorderInfoDTO" queryUrl="../SalesSellorderInfo/GetSellorderInfoList">
          <Fields key="OrderId,OrgId">OrderNo,OrderTypeName,SellOrgName,ChannelName,ContractArchivesNo,PaymentTypeName,SellName,SellReach1,TerminalName,AgentName,ContractBusinessNo,SapOrderNo1,CreateDate1</Fields>
          <OrderFields> OrderNo,OrderTypeName,SellOrgName,ChannelName,ContractArchivesNo,PaymentTypeName,SellName,SellReach1,TerminalName,AgentName,ContractBusinessNo,SapOrderNo1,CreateDate1</OrderFields>
          <Action>
            <View linkTitle="查看" value="/SANY.DMS.Group.WebUIMVC4/Group/SalesSellorderInfo/SalesSellorderInfo?czlx=1&amp;id={0}" authCode="FUNC_XSDD_CHAKAN" />
            <Edit linkTitle="修改" value="/SANY.DMS.Group.WebUIMVC4/Group/SalesSellorderInfo/SalesSellorderInfo?czlx=0&amp;id={0}" authCode="FUNC_XSDD_UPDATE,FUNC_XSDD_UPDATE_INVOICE_PLAN" />
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
                
        ]]>
      </Script>
    </Page>

    <Page name="PriceAdjustOrder" desc="销售调价管理">
      <OperateControls>
        <OperateControl text="新增"  authCode="AUTH_FUNC_SALES_PRICE_ADJUST_ADD" htmlAttr="onclick='PriceAdjustOrderList.SelectOrder();'" />
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.WebUIMVC4" typeName="SANY.DMS.Group.WebUIMVC4.Areas.Group.Models.PriceAdjustOrderQCModel">
        <Row>
          <Column>
            <SearchControl propertyInfoName="AppNo" controlType="text"  desc="业务流水号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="OrderNo" controlType="text" desc="订单编号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SapOrderNo" controlType="text" desc="SAP订单号" />
          </Column>
        </Row>

        <Row>
          <Column>
            <SearchControl propertyInfoName="OrderTypeId" controlType="select" getDataKey="GetOrderType" desc="订单类型" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SellTypeId" controlType="select" getDataKey="" desc="销售类型" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="PaymentTypeId" controlType="select" desc="付款方式" />
          </Column>
        </Row>


        <Row>
          <Column>
            <SearchControl propertyInfoName="SellReach" controlType="text" desc="售达方" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="AgentId" controlType="select" getDataKey="" desc="代理商" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SellName" controlType="text" desc="销售代表" />
          </Column>
        </Row>

        <Row>
          <Column>
            <SearchControl propertyInfoName="RecordStatus" controlType="select" getDataKey=""  desc="记录状态" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="StartDate"  controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="-" />
            <SearchControl propertyInfoName="EndDate"  controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblPriceAdjustOrder" assemblyName="SANY.DMS.Group.Sales.BizModel" typeName="SANY.DMS.Group.Sales.BizModel.CustomerManage.PriceAdjustOrderInfoModel" queryUrl="../SalesSellorderInfo/GetPriceAdjustOrderList">
          <Fields key="AppId">AppNo,RecordStatusName,WorkflowStatusName,OrderNo,OrderTypeName,SellOrgName,ChannelName,ContractArchivesNo,PaymentTypeName,SellName,SellReach,TerminalName,AgentName,ContractBusinessNo,SapOrderNo,CreateDate,OldContractAmount,NewContractAmount</Fields>
          <OrderFields>AppNo,RecordStatusName,WorkflowStatusName,OrderNo,OrderTypeName,SellOrgName,ChannelName,ContractArchivesNo,PaymentTypeName,SellName,SellReach,TerminalName,AgentName,ContractBusinessNo,SapOrderNo,CreateDate,OldContractAmount,NewContractAmount</OrderFields>
          <Action>
            <View linkTitle="查看" value="" authCode="FUNC_XSDD_CHAKAN" />
            <Edit linkTitle="修改" value="" authCode="FUNC_XSDD_CHAKAN" />
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[                    
        ]]>
      </Script>
    </Page>

    <Page name="SalesStationConfirm" desc="发货信息确认表管理">
      <SearchControls assemblyName=" SANY.DMS.Group.WebUIMVC4" typeName=" SANY.DMS.Group.WebUIMVC4.Areas.Group.Models.StationConfirmQCModel">
        <Row>
          <Column>
            <SearchControl propertyInfoName="CusName" controlType="text"  desc="客户姓名" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WorkFlowStatus" controlType="select" getDataKey="GetWorkFlowStatus"  desc="状态" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ProductType" controlType="select" getDataKey="GetProductTypes" desc="型号" />
          </Column>
        </Row>

        <Row>
          <Column>
            <SearchControl propertyInfoName="StationName" controlType="text" desc="站名" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="InstallLocation" controlType="text" desc="安装地址" />
          </Column>
        </Row>

      </SearchControls>
      <Tables>
        <Table name="tblSalesStationConfirm" assemblyName="SANY.DMS.Group.Sales.BizModel" typeName="SANY.DMS.Group.Sales.BizModel.Trade.SalesStationConfirmInfoDTO" queryUrl="../SalesStationConfirmInfo/GetSalesStationConfirmInfoList" isAllowEdit="true">
          <Fields key="StationId">WorkflowStatusName,StationName,CusName,Linker,SellName,SellTel,ProductTypeName,OperName,CreateDate,SendFlagStr</Fields>
          <OrderFields> WorkflowStatusName,StationName,CusName,Linker,SellName,SellTel,ProductTypeName,OperName,CreateDate,SendFlagStr</OrderFields>
          <Action>
            <View linkTitle="填写发货信息确认表" value="/SANY.DMS.Group.WebUIMVC4/Group/SalesStationConfirmInfo/Edit?id={0}" />
            <Edit linkTitle="查看" value="/SANY.DMS.Group.WebUIMVC4/Group/SalesStationConfirmInfo/Details?id={0}"/>
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
                
        ]]>
      </Script>
    </Page>

    <Page name="UserBuyList" desc="客户购买数据查询">
      <SearchControls assemblyName="SANY.DMS.Group.Sales.BizModel" typeName=" SANY.DMS.Group.Sales.BizModel.CustomerManage.SalesCreditDTO">
        <Row>
          <Column>
            <SearchControl propertyInfoName="WorkflowStatusId" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetWorkFlowStatus"  desc="状态" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="CustomerName" controlType="text"   desc="客户名称" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="AgentId" controlType="select" htmlAttr="multiple='multiple'" getDataKey="" desc="代理商" />
          </Column>
        </Row>

        <Row>
          <Column>
            <SearchControl propertyInfoName="PayTypeId" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetPaymentType" desc="付款方式" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SellName" controlType="text" desc="营销代表" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SaleTypeId" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetSellType" desc="销售类型" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="StartDate"  controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="至" />
            <SearchControl propertyInfoName="EndDate"  controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblUserBuyList"  assemblyName="SANY.DMS.Group.Sales.BizModel" typeName=" SANY.DMS.Group.Sales.BizModel.CustomerManage.SalesCreditDTO" queryUrl="../CustCredit/GetUserBuyPageList">
          <Fields key="OrderId">CusName,BeCusName,SellTypeName,PaymentTypeName,DealerName,ByFcontractNo,ContractNo,FinanceManagerName,CusIntentCreateDate,SellName,CreditLevelName_Cus,CreditLevelName_Agent,DeliveryStatus</Fields>
          <OrderFields> CusName,BeCusName,SellTypeName,PaymentTypeName,DealerName,ByFcontractNo,ContractNo,FinanceManagerName,CusIntentCreateDate,SellName,CreditLevelName_Cus,CreditLevelName_Agent,DeliveryStatus</OrderFields>
          <Action>
            <View linkTitle="查看客户意向" value="/SANY.DMS.Group.WebUIMVC4/Group/CustIntent/CustIntentView?IntendId={0}" />
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
                 <script type="text/javascript">
              
                 </script>
        ]]>
      </Script>
    </Page>

    <Page name="CustomerManage" desc="客户查询">
      <SearchControls assemblyName="SANY.DMS.Group.Sales.BizModel" typeName=" SANY.DMS.Group.Sales.BizModel.CustomerManage.SalesCustomerDTO">
        <Row>
          <Column>
            <SearchControl propertyInfoName="CusCharacter" controlType="select" getDataKey="GetCusCharacter"  desc="客户性质" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="IdentityCardId" controlType="text"   desc="证件号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RecordStatus" controlType="select"  getDataKey="GetWorkFlowStatus" desc="状态" />
          </Column>
        </Row>

        <Row>
          <Column>
            <SearchControl propertyInfoName="CustomerName" controlType="text"  desc="客户名称" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="ContactPerson" controlType="text" desc="录入人" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="SAPSend" controlType="select" getDataKey="" desc="客户码是否为空" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="CusStarLevel" controlType="select" getDataKey="" desc="星级客户" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="CusCode186" controlType="select" getDataKey="" desc="186客户" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="AgentIds" controlType="select" htmlAttr="multiple='multiple'" getDataKey="" desc="代理商" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="RequestDateFrom"  controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="至" />
            <SearchControl propertyInfoName="RequestDateTo"  controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblUserBuyList"  assemblyName="SANY.DMS.Group.Sales.BizModel" typeName=" SANY.DMS.Group.Sales.BizModel.CustomerManage.SalesCustomerDTO" queryUrl="../SalesCustManager/GetCusList">
          <Fields key="CusId">CusName,CusCharacterName,SapCusId,CusStarLevelName,CardId,CreatorName,CreateDate,IsSapCusStr,CusName186,OrgShortName,RecordStatusName</Fields>
          <OrderFields>CusName,CusCharacterName,SapCusId,CusStarLevelName,CardId,CreatorName,CreateDate,IsSapCusStr,CusName186,OrgShortName,RecordStatusName</OrderFields>
          <HiddenFields>CusCharacterName</HiddenFields>
          <Action>
            <View linkTitle="查看客户" value="/SANY.DMS.Group.WebUIMVC4/Group/SalesCustManager/$cusType$?OperatorID=query&amp;CusId={0}" />
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
          //绑定数据后修改链接
          function afterTableDataBind(){
            $("table[name='tblUserBuyList']").children("tbody").children("tr").each(function(){
              var hidCusCharacterName=$(this).children("td:first").find("input[type='hidden'][name='hidCusCharacterName']").val();
              var cusType=hidCusCharacterName=="自然人"?"CustomerViewNatural":"CustomerViewLegal";
              var linkButton=$(this).children("td:last").find("a:last");
              linkButton.attr("onclick",linkButton.attr("onclick").replace("$cusType$",cusType));
            });
          }     
          </script>
        ]]>
      </Script>
    </Page>
    <Page name="NtSalesOrderChangeReportBmu" desc="事业部订单资金变动表">
      <OperateControls>
        <OperateControl text="导出" authCode="AUTH_FUNC_FINANCE_MUN_CHANGE_EXPORT" htmlAttr="onclick='exportExcel();'" />
      </OperateControls>
      <SearchControls assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtSalesOrderChangeListDTO" advancedSearchRow="1">
        <Row>
          <Column>
            <SearchControl propertyInfoName="SapWarrantNo" controlType="text" desc="SAP凭证号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="WarrantTime" name="StartDate" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',startDate:'%y-%M-01'})&quot;" unionText="-" />
            <SearchControl propertyInfoName="WarrantTime" name="EndDate" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}',startDate:'%y-%M-%d'})&quot;" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="BillSapNo" controlType="text" desc="SAP订单号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="CusName" controlType="text" desc="客户名称" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="RealCusName" name="RealCus" controlType="select" htmlAttr="multiple='multiple'" getDataKey="GetSellers" desc="代理商" />
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="BillNo" controlType="text" desc="DMS订单号" />
          </Column>
          <Column>
            <SearchControl propertyInfoName="AppNo" controlType="text" desc="业务流水单号" />
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblSalesOrderChange" assemblyName="SANY.DMS.Group.Finance.BizModel" typeName="SANY.DMS.Group.Finance.BizModel.Finance.NtSalesOrderChangeListDTO" queryUrl="../FinanceReport/GetSalesOrderChangePageList">
          <Fields key="AppId">SapCusId,CusName,RealSapCusId,RealCusName,BillNo,BillSapNo,PayableAmt,Dtds,DtdsName,InvoiceMoney,SubAmt,RecvTypeName,AppNo,RecvNo,WarrantNo,SapWarrantNo,WarrantTime</Fields>
          <OrderFields>CusName,BillSapNo,SapWarrantNo,WarrantTime</OrderFields>
          <HiddenFields>AppId</HiddenFields>
        </Table>
      </Tables>
      <Script>
        <![CDATA[
          <script type="text/javascript">
          //导出Excel
          function exportExcel(){
            site_common.ShowProgressBar();
            
            var sapWarrantNo=$("input[name='SapWarrantNo']").val();
            sapWarrantNo=sapWarrantNo==null?"":sapWarrantNo.Trim();
            
            var billNo=$("input[name='BillNo']").val();
            billNo=billNo==null?"":billNo.Trim();
            
             var startRecvDate=$("input[name='StartDate']").val();
            startRecvDate=startRecvDate==null?"":startRecvDate.Trim();
            
            var endRecvDate=$("input[name='EndDate']").val();
            endRecvDate=endRecvDate==null?"":endRecvDate.Trim();
            
            var billSapNo=$("select[name='BillSapNo']").val();
            billSapNo=billSapNo==null?"":billSapNo.Trim();
            
             var cusName=$("input[name='CusName']").val();
            cusName=cusName==null?"":cusName.Trim();
            
            var realCusName=$("input[name='RealCusName']").val();
            realCusName=realCusName==null?"":realCusName.Trim();
            
            var appNo=$("input[name='AppNo']").val();
            appNo=appNo==null?"":appNo.Trim();

            location.href="../FinanceReport/ExprotSalesOrderChange?SapWarrantNo={0}&BillNo={1}&StartDate={2}&EndDate={3}&BillSapNo={4}&CusName={5}&RealCusName={6}&AppNo={7}".Format(sapWarrantNo,billNo,startRecvDate,endRecvDate,billSapNo,cusName,realCusName,appNo);
            site_common.HideProgressBar();
          }
          //绑定数据后对已经发货评审过的数据禁用修改链接
          function afterTableDataBind(){
            $("table[name='tblSalesOrderChange']").children("tbody").children("tr").each(function(){
                $(this).children("td:eq(7)").html(commafy($(this).children("td:eq(7)").text()));
                $(this).children("td:eq(10)").html(commafy($(this).children("td:eq(10)").text()));
                $(this).children("td:eq(11)").html(commafy($(this).children("td:eq(11)").text())); 
                $(this).children("td:eq(13)").html('<a onclick=\"javascript:parent.addTab(\'解款查看-'+$(this).children("td:eq(13)").text()+'\',\'/SANY.DMS.Group.WebUIMVC4/Group/FinanceCusRecv/CusAllotDetail?AppId='+ $(this).children("td:eq(0)").find("INPUT").val()+'\',false,\'查看-'+$(this).children("td:eq(13)").text()+'\'); \" href=\"#\"><span>'+$(this).children("td:eq(13)").text()+'</span>');
            });
          }
           </script>
           ]]>
      </Script>
    </Page>
    <Page name="WarehouseMessage" title="信息管理" pageAuth="28">
      <OperateControls>
        <OperateControl text="查看" htmlAttr="id=&quot;btnView&quot;" elementAuth="34" class="Look_Btn"  />
        <OperateControl text="添加" href=""  htmlAttr="onclick=&quot;javascript:OpenDialogOrAddTab('dialog','add',''); &quot;"  elementAuth="34"  class="add_Btn"/>       
        <OperateControl text="编辑"    htmlAttr="id=&quot;btnEdit&quot;" elementAuth="35" class="Edit_Btn"/>
        <OperateControl text="删除" htmlAttr="id=&quot;btnDelete&quot;" elementAuth="36" class="Eel_Btn"/>
        <OperateControl text="发布" htmlAttr="id=&quot;btnConf&quot;" elementAuth="37" class="Post_Btn" /> 
      </OperateControls>
      <SearchControls assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.WarehouseMessageModel" advancedSearchRow="2">
        <Row>
          <Column>
            <SearchControl propertyInfoName="MessageType" controlType="select" htmlAttr="id=MessageType"  desc="消息类型"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="Title" controlType="text" desc="消息标题"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="ConfUserName" controlType="text" desc="发布人"/>
          </Column>
        </Row>
        <Row>
          <Column>
            <SearchControl propertyInfoName="Status"  controlType="select" htmlAttr="id=Status" desc="状态"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="BeginTime" name="BeginTime" controlType="date" htmlAttr="id='StartDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d'})&quot;" unionText="-"  desc="发布时间"/>
          </Column>
          <Column>
            <SearchControl propertyInfoName="EndTime" name="EndTime" controlType="date" htmlAttr="id='EndDate' onfocus = &quot;WdatePicker({dateFmt:'yyyy-M-d',minDate:'#F{$dp.$D(\'StartDate\')}'})&quot;"  desc="至"/>
          </Column>
        </Row>
      </SearchControls>
      <Tables>
        <Table name="tblWarehouseMessage" assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.WarehouseMessageModel" queryUrl="../WarehouseMessage/GetWarehouseMessageList" isSingleSelect="false" columnDisplayLength="20" rowDbClickFun="rowDbClick">
          <Fields key="ID">Title,MessageTypeStr,ConfTime,BeginTime,EndTime,IsFirstStr,WID,ConfUserName,StatusStr</Fields>
          <HiddenFields>ID</HiddenFields>
          <Width>200px,100px,100px,150px,150px,100px,100px,100px,100px</Width>
          <OrderFields></OrderFields>
          <Action>
            <!--<View linkTitle="查看" value="/WarehouseMessage/WarehouseMessageView?id={0}" elementAuth="1"/>  
            <Edit linkTitle="编辑"  value="/WarehouseMessage/WarehouseMessageAddOrEdit?id={0}" elementAuth="2"/> 
            <Delete linkTitle="删除" value="/WarehouseMessage/DeleteWarehouseMessage?id={0}" elementAuth="3" />-->
          </Action>
        </Table>
      </Tables>
      <Script>
        <![CDATA[          
            <script type="text/javascript" src="../Scripts/bussiness/WarehouseMessage/WarehouseMessageList.js"></script>   
        ]]>
      </Script>
    </Page>

    <Page name="WAdvertisementList" title="橱窗推荐列表" pageAuth="29">
      <OperateControls>
        <OperateControl text="新增" href="" htmlAttr="onclick=&quot;javascript:OpenDialogOrAddTab('dialog','add',''); &quot;"  elementAuth="34" class="add_Btn"/>
        <OperateControl text="编辑" htmlAttr="id=&quot;btnEdit&quot;" elementAuth="45" class="Edit_Btn"/>
        <OperateControl text="删除" htmlAttr="id=&quot;btnDelete&quot;" elementAuth="46" class="Eel_Btn"/>
      </OperateControls>
      <SearchControls assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.WAdvertisement" advancedSearchRow="2">
        <Row>

        </Row>

      </SearchControls>
      <Tables>
        <Table name="tblWAdvertisement" assemblyName="Frxs.Erp.WarehouseManagementSystem.WebUI" typeName="Frxs.Erp.WarehouseManagementSystem.WebUI.Models.WadvertisementModel" queryUrl="../WAdvertisement/GetWAdvertisementList" isSingleSelect="false" columnDisplayLength="20"  rowDbClickFun="rowDbClick">
          <Fields key="AdvertisementID">AdvertisementName,AdvertisementPosition</Fields>
          <HiddenFields>AdvertisementID</HiddenFields>
          <Width>100px,280px</Width>
          <OrderFields></OrderFields>
          <!--<Action>

            <Edit linkTitle="编辑" value="/WAdvertisement/WAdvertisementAddOrEdit?Id={0}" elementAuth="2" />
            <Delete linkTitle="删除"  elementAuth="3" />
          </Action>-->
        </Table>
      </Tables>
      <Script>
        <![CDATA[          
            <script type="text/javascript" src="../Scripts/bussiness/wAdvertisement/wAdvertisementList.js"></script>   
               
        ]]>
      </Script>
    </Page>
  </Pages>
</configuration>